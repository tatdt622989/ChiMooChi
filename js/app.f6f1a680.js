(function(t){function e(e){for(var s,i,n=e[0],c=e[1],l=e[2],u=0,p=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var c=a[n];0!==r[c]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={app:0},o=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01fa":function(t,e,a){"use strict";var s=a("be3a"),r=a.n(s);r.a},"0580":function(t,e,a){},"067a":function(t,e,a){},"0967":function(t,e,a){},"0ed0":function(t,e,a){"use strict";var s=a("871e"),r=a.n(s);r.a},"0f66":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJSSURBVHgB1ZnPahNRFMa/CYKCm4gLcTd1oTvbbN0Y14IIPoABH8C+QdP3UPQFJFRwPXHjNqk7XZi4UQSlWShWLJyeb/6kMymFzp177jQ/OJnkJsz8cnJzz517IzRARLp66Gvc14g1tjS6eZCFxjw/TjXea4yjKFogJCra10g0DsSNkcZjWMOLaMzEHzONAXyjJ40ly6gVE14DPtATPRf3n74OvMY2mqAn2JHw7MCFlmTdpFuWLTiftGR99qJwqk9HK7KxHiY4GfjbhgWmp4VmXjR0Vj4wwsWRJXR5VW5YCks2gG/BgT+/vuPj25c4+ncIA1hVl1Vx2SW0cYZsPlCLsuzV6zdx99EzXLp8BZ6Za7fY4JM0w/k3iFETSpYza5hpVto+nxRd4ikcYCZv3XtYaTOUToe5SLIp4gEa8OPTBJ+TN5U2g+7BEWODGe6jITfu9HD7wZNKm0Gm07m3F2ESSDoV3oQnAkjHFPZaKIylNykcwzOG0l2OEgIjLEaPDtYMCpvcchuNzQsTYcNCMqfwFB4xrnpphr/CEwFK9D6Fx/BAoPnEuJj8cC7sXEACyZJrnXxhzrkfB5Tdo2sxDu/CAVatLx/eVdoM7zpe82HtbpGWSLYy6cTvn99kf++F/D/8K0YMCs/VdYkEnubHHplqdnvFi/VeSMnfcPoDGrFblj0TzfRQ2meIOki70kO40JL0EE3QE2zLumwZlKS5VDQROxLxtSmzIj4Q/9tewfbrRuIGf/pE8sW9ukRogJxs3TK4IMPXMapbt8VskDcKYzTcuj0Gzv77hrQ3bC0AAAAASUVORK5CYII="},"18ed":function(t,e,a){},"1c02":function(t,e,a){"use strict";var s=a("c737"),r=a.n(s);r.a},"1d9b":function(t,e,a){t.exports=a.p+"img/featured-banner-01.ff77f7a5.png"},"1da5":function(t,e,a){t.exports=a.p+"img/OUOLxK.387c1a21.png"},"206d":function(t,e,a){"use strict";var s=a("4413"),r=a.n(s);r.a},"22c0":function(t,e,a){},"23b0":function(t,e,a){t.exports=a.p+"img/promotion-title.50f867a3.svg"},"298d":function(t,e,a){},"2aa4":function(t,e,a){},"2df8":function(t,e,a){t.exports=a.p+"img/carousel-banner-xl-02.f2cfa0ef.png"},"313e":function(t,e,a){"use strict";var s=a("a689"),r=a.n(s);r.a},3369:function(t,e,a){"use strict";var s=a("dd7c"),r=a.n(s);r.a},"3a21":function(t,e,a){"use strict";var s=a("557c"),r=a.n(s);r.a},"3db9":function(t,e,a){t.exports=a.p+"img/nRxxZe.8cc2c3c0.png"},"3e64":function(t,e,a){"use strict";var s=a("ba81"),r=a.n(s);r.a},"3fe5":function(t,e,a){"use strict";var s=a("4639"),r=a.n(s);r.a},"423e":function(t,e,a){"use strict";var s=a("0580"),r=a.n(s);r.a},4365:function(t,e,a){},4413:function(t,e,a){},4639:function(t,e,a){},"47cb":function(t,e,a){t.exports=a.p+"img/carousel-banner-sm-01.4abb8491.png"},"52b1":function(t,e,a){t.exports=a.p+"img/KDgw03.593f9a75.png"},"537e":function(t,e,a){},"557c":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4"),a("ac1f"),a("466d");var s=a("5530"),r=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),o=a("bc3a"),i=a.n(o),n=a("a7fe"),c=a.n(n),l=a("9062"),d=a.n(l),u=(a("e40d"),a("7bb1")),p=a("4c93"),m=a("60d4"),f=(a("4989"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iframe",{attrs:{src:t.publicPath+"logo-loading-animation.html",frameborder:"0"}})}),v=[],h={name:"LogoLoadingAnimation",data:function(){return{publicPath:""}}},g=h,b=a("2877"),_=Object(b["a"])(g,f,v,!1,null,null,null),C=_.exports,y=a("ecee"),w=a("f2d1"),x=a("c074"),P=a("ad3d"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Toast"),a("router-view")],1)},k=[],O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toast-list"},t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"toast",class:e.mode,attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},[a("div",{staticClass:"toast-header pb-0"},[a("strong",{staticClass:"mr-auto"},[t._v(t._s(e.title))]),a("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button","data-dismiss":"toast","aria-label":"Close"},on:{click:function(e){return t.removeToast(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"toast-body"},[t._v(t._s(e.message))])])})),0)},M=[],A=(a("4160"),a("a434"),a("159b"),{name:"toast",data:function(){return{messages:[]}},methods:{pushToast:function(t,e,a){var s=this,r=Math.floor(new Date/1e3);s.messages.push({title:t,message:e,mode:a,timestamp:r}),s.removeToastWithTiming(r)},removeToast:function(t){var e=this;e.messages.splice(t,1)},removeToastWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,s){a.timestamp===t&&e.messages.splice(s,1)}))}),3e3)}},created:function(){var t=this;t.$bus.$on("message:push",(function(e,a,s){t.pushToast(e,a,s)}))}}),S=A,T=(a("9370"),Object(b["a"])(S,O,M,!1,null,null,null)),E=T.exports,N={name:"App",components:{Toast:E}},q=N,I=(a("5c0b"),Object(b["a"])(q,$,k,!1,null,null,null)),L=I.exports,R=a("8c4f"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"catalog"},[a("Navbar",{attrs:{"favorite-products":t.favoriteProducts},on:{"shopping-cart":t.getShoppingCart}}),a("Favorite",{attrs:{"shopping-cart":t.shoppingCart},on:{"favorite-products":t.getFavoriteProducts}}),a("router-view",{attrs:{"shopping-cart":t.shoppingCart,"favorite-products":t.favoriteProducts}}),a("Footer")],1)},F=[],D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-expand-lg p-0"},[s("div",{staticClass:"container"},[s("div",{staticClass:"d-flex align-items-center"},[s("button",{staticClass:"navbar-toggler border-0",attrs:{type:"button","aria-label":"Toggle navigation"},on:{click:t.navbarToggler}},[s("span",{staticClass:"material-icons"},[t._v("menu")])]),s("router-link",{staticClass:"navbar-brand",attrs:{to:"/",title:"ChiMooChi"}},[s("img",{staticClass:"navbar-brand-img",attrs:{src:a("e347"),alt:"ChiMooChi"}})])],1),s("div",{staticClass:"navbar-primary",class:{show:t.isShow}},[s("button",{staticClass:"close-navbar-btn",on:{click:t.navbarToggler}},[s("span",{staticClass:"material-icons"},[t._v("close")])]),s("ul",{staticClass:"navbar-nav"},[s("li",{staticClass:"nav-item ml-0"},[s("router-link",{staticClass:"nav-link p-0",attrs:{to:"/home",href:"#",tabindex:"-1","active-class":"active"},nativeOn:{click:function(e){return t.closeNavbar(e)}}},[t._v(" 首頁 ")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link p-0",attrs:{to:"/products",href:"#","active-class":"active"},nativeOn:{click:function(e){return t.closeNavbar(e)}}},[t._v("本店商品")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link p-0",attrs:{to:"/promotion","active-class":"active"},nativeOn:{click:function(e){return t.closeNavbar(e)}}},[t._v("超值優惠")])],1)])]),s("ul",{staticClass:"navbar-member"},[s("li",{staticClass:"navbar-member-item"},[s("router-link",{staticClass:"navbar-member-link btn-square",attrs:{to:"/dashboard/products"}},[s("span",{staticClass:"material-icons lh-1"},[t._v("account_circle")])])],1),s("li",{staticClass:"navbar-member-item"},[s("button",{staticClass:"navbar-member-link btn-square",attrs:{"data-toggle":"modal","data-target":"#exampleModal"}},[s("transition",{attrs:{name:"base"}},[t.notification.favorite?s("span",{staticClass:"navbar-member-badge badge badge-danger"},[t._v(t._s(t.notification.favorite))]):t._e()]),s("span",{staticClass:"material-icons lh-1"},[t._v("favorite")])],1)]),s("li",{staticClass:"navbar-member-item"},[s("router-link",{staticClass:"navbar-member-link btn-square",attrs:{to:"/shopping-cart"}},[s("transition",{attrs:{name:"base"}},[t.notification.shoppingCart?s("span",{staticClass:"navbar-member-badge badge badge-danger"},[t._v(t._s(t.notification.shoppingCart))]):t._e()]),s("span",{staticClass:"material-icons lh-1"},[t._v("shopping_cart")])],1)],1)])]),s("transition",{attrs:{name:"bg-fade"}},[!0===t.isShow?s("div",{staticClass:"fullscreen-bg",on:{click:t.closeNavbar}}):t._e()])],1)},z=[],V=(a("99af"),a("1157")),H=a.n(V),Y={name:"Navbar",props:["favoriteProducts"],data:function(){return{isShow:!1,notification:{shoppingCart:0,favorite:0}}},methods:{navbarToggler:function(){var t=this;t.isShow=!t.isShow,t.isShow?H()("body").css("overflow","hidden"):H()("body").css("overflow","")},closeNavbar:function(){var t=this;t.isShow=!1,H()("body").css("overflow","")},getShoppingCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart"),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.get(e).then((function(e){t.notification.shoppingCart=e.data.data.carts.length,t.$emit("shopping-cart",e.data.data),a.hide()}))}},watch:{favoriteProducts:function(){this.notification.favorite=this.favoriteProducts.length}},created:function(){var t=this;H()(window).resize((function(){t.isShow=!1,H()("body").css("overflow","")})),t.notification.favorite=t.favoriteProducts.length,t.getShoppingCart(),t.$bus.$on("shopping-cart:update",(function(){t.getShoppingCart()}))},destroyed:function(){H()(window).off("resize")}},B=Y,U=(a("3a21"),Object(b["a"])(B,D,z,!1,null,null,null)),J=U.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"favorite-modal modal fade",attrs:{id:"exampleModal"}},[a("div",{staticClass:"modal-dialog modal-sm modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content",attrs:{tabindex:"-1",role:"dialog"}},[t._m(0),a("div",{staticClass:"modal-body"},[a("ul",{staticClass:"m-0 p-0"},t._l(t.favoriteProducts,(function(e,s){return a("li",{key:e.id,staticClass:"favorite-modal-item flex-wrap border-bottom border-light"},[a("div",{staticClass:"favorite-modal-product-img"},[a("img",{attrs:{src:e.imageUrl}})]),a("p",{staticClass:"product-title text-overflow"},[t._v(t._s(e.title))]),a("Counter",{attrs:{qty:e.qty,unit:e.unit},on:{"update:qty":[function(a){return t.$set(e,"qty",a)},function(e){return t.updateQty(e,s)}]}}),a("p",{staticClass:"price font-weight-bold"},[t._v(" "+t._s(t._f("currency")(e.price*e.qty))+" ")]),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn-square btn-outline-secondary mr-16",on:{click:function(a){return t.addToShoppingCart(e,s)}}},[a("span",{staticClass:"material-icons"},[t._v("shopping_cart")])]),a("button",{staticClass:"btn-square btn-outline-danger",on:{click:function(e){return t.updateFavorite("delete",null,s)}}},[a("span",{staticClass:"material-icons"},[t._v("delete")])])])],1)})),0),0===t.favoriteProducts.length?a("div",{staticClass:"favorite-modal-empty"},[a("p",{staticClass:"mb-3 fz-3"},[t._v("還沒有最愛的商品喔！")]),a("a",{staticClass:"btn btn-tertiary text-white",attrs:{href:""}},[t._v("去逛逛")])]):t._e()])])])])},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("我的最愛")]),a("button",{staticClass:"close p-16",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Z=(a("c740"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"counter"},[a("button",{staticClass:"counter-btn btn-square btn-outline-secondary",attrs:{disabled:!(t.qty>1)},on:{click:function(e){t.$emit("update:qty",parseInt(t.$refs.qty.value,10)-1)}}},[a("span",{staticClass:"material-icons fz-4 counter-btn-icon"},[t._v("remove")])]),a("div",{staticClass:"counter-quantity"},[a("input",{ref:"qty",staticClass:" w-100 border-0 p-0 text-secondary text-center",attrs:{type:"text"},domProps:{value:t.qty},on:{input:function(e){return t.$emit("update:qty",t.$refs.qty.value)}}}),a("span",{staticClass:"unit"},[t._v(t._s(t.unit))])]),a("button",{staticClass:"counter-btn btn-square btn-outline-secondary",on:{click:function(e){t.$emit("update:qty",parseInt(t.$refs.qty.value,10)+1)}}},[a("span",{staticClass:"material-icons fz-4 counter-btn-icon"},[t._v("add")])])])}),X=[],Q={name:"Counter",props:["qty","unit"]},G=Q,tt=(a("a4a0"),Object(b["a"])(G,Z,X,!1,null,null,null)),et=tt.exports,at={name:"Favorite",props:["shopping-cart"],components:{Counter:et},data:function(){return{favoriteProducts:[],allProducts:[],product:{}}},methods:{getFavorite:function(){var t=this;localStorage.getItem("favoriteProducts")&&(t.favoriteProducts=JSON.parse(localStorage.getItem("favoriteProducts")))},addToShoppingCart:function(t,e){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/products/all"),r=a.$loading.show({},{default:a.$createElement("LogoLoadingAnimation")});a.$http.get(s).then((function(s){a.allProducts=s.data.products;var o=a.allProducts.findIndex((function(e){return e.id===t.id}));if(r.hide(),-1===o)a.updateFavorite("delete",void 0,e),a.$bus.$emit("message:push","提醒","此產品已經下架","warning");else{var i=a.$loading.show({},{default:a.$createElement("LogoLoadingAnimation")}),n=a.shoppingCart.carts.filter((function(e){return e.product_id===t.id&&t})),c={},l="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart");if(0!==n.length){var d="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart/").concat(n[0].id);c.qty=n[0].qty+t.qty,a.$http.delete(d).then((function(){c.product_id=t.id,a.$http.post(l,{data:c}).then((function(){i.hide(),a.$bus.$emit("shopping-cart:update"),a.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}))}))}else c.qty=t.qty,c.product_id=t.id,a.$http.post(l,{data:c}).then((function(){i.hide(),a.$bus.$emit("shopping-cart:update"),a.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}))}}))},updateFavorite:function(t,e,a){var s=this;"add"===t&&s.favoriteProducts.push(e),"delete"===t&&s.favoriteProducts.splice(a,1);var r=JSON.stringify(s.favoriteProducts);localStorage.setItem("favoriteProducts",r),s.$emit("favorite-products",s.favoriteProducts)},updateQty:function(t,e){var a=e;this.favoriteProducts[a].qty=t;var s=JSON.stringify(this.favoriteProducts);localStorage.setItem("favoriteProducts",s)}},created:function(){var t=this;t.$bus.$on("favorite:update",(function(e,a,s){t.updateFavorite(e,a,s)})),t.getFavorite(),t.$emit("favorite-products",t.favoriteProducts)}},st=at,rt=(a("423e"),Object(b["a"])(st,W,K,!1,null,"42db70c8",null)),ot=rt.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"container"},[a("div",{staticClass:"footer-body"},[t._m(0),a("div",{staticClass:"footer-nav"},[a("div",{staticClass:"contact"},[a("h4",[t._v("聯絡我們")]),a("div",{staticClass:"email"},[a("p",{staticClass:"mr-12 my-0"},[t._v("chimoochi@example.com")]),a("button",[a("font-awesome-icon",{attrs:{icon:["fas","envelope-square"]}})],1)]),a("div",{staticClass:"phone"},[a("p",{staticClass:"mr-12 my-0"},[t._v("0800-xxx-xxx")]),a("button",[a("font-awesome-icon",{attrs:{icon:["fas","phone-square"]}})],1)])]),a("div",{staticClass:"about"},[a("h4",[t._v("關注我們")]),a("div",{staticClass:"btn-group"},[a("a",{staticClass:"instagram-logo",attrs:{href:"#"}},[a("font-awesome-icon",{attrs:{icon:["fab","instagram-square"]}})],1),a("a",{staticClass:"youtube-logo",attrs:{href:"#"}},[a("font-awesome-icon",{attrs:{icon:["fab","youtube-square"]}})],1),a("a",{staticClass:"facebook-logo",attrs:{href:"#"}},[a("font-awesome-icon",{attrs:{icon:["fab","facebook-square"]}})],1),a("a",{staticClass:"twitter-logo",attrs:{href:"#"}},[a("font-awesome-icon",{attrs:{icon:["fab","twitter-square"]}})],1)])])])]),t._m(1)])},nt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer-content"},[s("img",{attrs:{src:a("e92b"),alt:"logo-white"}}),s("p",{staticClass:"w-100 mb-0"},[t._v("奇木奇成立於2020年，已經有超過一年的歷史，將產品做到最好，是我們一直以來的原則。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"copyright"},[a("p",[t._v("僅用於個人學習使用，非商業用途。")]),a("p",[t._v(" ©2020 ChiMooChi by "),a("a",{staticClass:"text-tertiary font-weight-bold",attrs:{href:"http://6yuwei.tw/",target:"_parent"}},[t._v("6yuwei")])])])}],ct=(a("3e64"),{}),lt=Object(b["a"])(ct,it,nt,!1,null,"e4e98b9a",null),dt=lt.exports,ut={name:"Catalog",components:{Navbar:J,Favorite:ot,Footer:dt},data:function(){return{favoriteProducts:[],shoppingCart:{}}},methods:{getFavoriteProducts:function(t){this.favoriteProducts=t},getShoppingCart:function(t){this.shoppingCart=t}}},pt=ut,mt=(a("1c02"),Object(b["a"])(pt,j,F,!1,null,null,null)),ft=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login container-fluid p-0"},[a("div",{staticClass:"login-panel"},[a("div",{staticClass:"login-panel-nav"},[a("a",{staticClass:"btn-square text-hover-primary pointer-event",attrs:{href:"#"},on:{click:function(e){return t.$router.go(-1)}}},[a("span",{staticClass:"material-icons"},[t._v("keyboard_backspace")])]),a("router-link",{staticClass:"login-panel-logo",attrs:{to:"/"}})],1),a("div",{staticClass:"login-panel-content"},[a("h1",{staticClass:"f-30 f-md-36 mt-12 mt-md-0 mb-12 mb-md-28 text-left"},[t._v("歡迎來到奇木奇！")]),a("ValidationObserver",{ref:"form",staticClass:"d-flex flex-wrap",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[a("ValidationProvider",{staticClass:"form-group mb-16",attrs:{rules:"email|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{staticClass:"text-left w-100",attrs:{for:"username"}},[t._v("會員帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"login-input form-control",class:{"is-invalid":r},attrs:{type:"email",id:"username",autocomplete:"username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group mb-16",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{staticClass:"text-left w-100",attrs:{for:"current-password"}},[t._v("會員密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"login-input form-control",class:{"is-invalid":r},attrs:{type:"password",id:"current-password",autocomplete:"current-password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("button",{staticClass:"btn btn-tertiary mt-28 w-100",attrs:{type:"submit"}},[t._v("登入")])],1)],1)]),a("Toast")],1)},ht=[],gt={name:"Login",components:{Toast:E},data:function(){return{user:{username:"",password:""},loader:""}},methods:{signIn:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/admin/signin");e.$refs.form.validate().then((function(s){s&&(e.loader=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")}),t.$http.post(a,e.user).then((function(t){t.data.success?e.$router.push("dashboard/products"):(e.loader.hide(),e.$bus.$emit("message:push","錯誤","帳號或密碼錯誤","danger"))})),e.$refs.form.reset())}))}},destroyed:function(){this.loader.hide()}},bt=gt,_t=(a("206d"),Object(b["a"])(bt,vt,ht,!1,null,null,null)),Ct=_t.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header container-fluid d-flex p-0"},[a("Sidebar",{attrs:{"is-show":t.isShow},on:{"close-sidebar-request":t.closeSidebar}}),a("div",{staticClass:"dashboard-body"},[a("Header",{attrs:{"is-new-modal":t.isNewModal,search:t.search},on:{"open-sidebar-request":t.openSidebar,"update:isNewModal":function(e){t.isNewModal=e},"update:is-new-modal":function(e){t.isNewModal=e},"update:search":function(e){t.search=e}}}),a("router-view",{attrs:{isNewModal:t.isNewModal,search:t.search},on:{"update:isNewModal":function(e){t.isNewModal=e},"update:is-new-modal":function(e){t.isNewModal=e}}})],1)],1)},wt=[],xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"sidebar",class:{show:t.isShow},style:{height:t.windowHeight}},[s("button",{staticClass:"sidebar-close-btn my-24 my-md-32 btn-square btn-secondary",on:{click:t.closeSidebarRequest}},[s("span",{staticClass:"material-icons"},[t._v("close")])]),s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"my-24 my-md-32 mr-16 mx-lg-24",attrs:{src:a("e92b")}})]),s("ul",{staticClass:"sidebar-list"},[s("li",{staticClass:"sidebar-item",on:{click:t.closeSidebarRequest}},[s("router-link",{staticClass:"sidebar-link btn btn-secondary",attrs:{to:"/dashboard/products","active-class":"active"}},[s("span",{staticClass:"material-icons"},[t._v("local_mall")]),t._v(" 商品管理")])],1),s("li",{staticClass:"sidebar-item",on:{click:t.closeSidebarRequest}},[s("router-link",{staticClass:"sidebar-link btn btn-secondary",attrs:{to:"/dashboard/orders","active-class":"active"}},[s("span",{staticClass:"material-icons"},[t._v("receipt")]),t._v(" 訂單管理")])],1),s("li",{staticClass:"sidebar-item",on:{click:t.closeSidebarRequest}},[s("router-link",{staticClass:"sidebar-link btn btn-secondary",attrs:{to:"/dashboard/coupons","active-class":"active"}},[s("img",{staticClass:"sidebar-icon",attrs:{src:a("b7c6")}}),t._v(" 優惠券管理")])],1)]),s("button",{staticClass:"logout-btn align-self-end btn btn-secondary w-100",on:{click:t.signout}},[s("span",{staticClass:"material-icons"},[t._v("keyboard_backspace")]),t._v(" 登出 ")])],1),s("transition",{attrs:{name:"bg-fade"}},[!0===t.isShow?s("div",{staticClass:"fullscreen-bg",on:{click:t.closeSidebarRequest}}):t._e()])],1)},Pt=[],$t={name:"Sidebar",props:["isShow"],data:function(){return{windowHeight:"".concat(window.innerHeight,"px")}},methods:{signout:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/logout");t.$http.post(e).then((function(e){e.data.success&&t.$router.push("/")})),t.closeSidebarRequest()},closeSidebarRequest:function(){this.$emit("close-sidebar-request")}},created:function(){var t=this;H()(window).resize((function(){t.$emit("close-sidebar-request"),H()("body").css("overflow",""),t.windowHeight="".concat(window.innerHeight,"px")}))},destroyed:function(){H()("body").css("overflow",""),H()(window).off("resize")}},kt=$t,Ot=(a("c53e"),Object(b["a"])(kt,xt,Pt,!1,null,null,null)),Mt=Ot.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-header"},[a("button",{staticClass:"sidebar-toggler btn-square btn-outline-secondary",on:{click:t.openSidebarRequest}},[a("span",{staticClass:"material-icons"},[t._v("menu")])]),a("h1",{staticClass:"dashboard-header-title f-lg-30 f-24 my-24 ml-0 ml-lg-0",class:{"is-order":t.isOrder}},[t._v(t._s(t.headerText)+"管理")]),t.targetModal?a("button",{staticClass:"btn-square btn-tertiary d-block d-lg-none",on:{click:t.openModal}},[a("span",{staticClass:"material-icons"},[t._v("add")])]):t._e(),a("Search",t._g(t._b({staticClass:"search-form"},"Search",t.$attrs,!1),t.$listeners)),t.targetModal?a("button",{staticClass:"btn btn-tertiary d-none d-lg-block order-2",on:{click:t.openModal}},[t._v("建立"+t._s(t.headerText))]):t._e()],1)},St=[],Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("div",{staticClass:"form-group position-relative"},[t._m(0),a("input",{ref:"search",staticClass:"form-control search",attrs:{type:"search",placeholder:"搜尋",id:"search"},domProps:{value:t.search},on:{input:function(e){return t.$emit("update:search",t.$refs.search.value)}}})])])},Et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"search",id:"searchLabel"}},[a("span",{staticClass:"material-icons"},[t._v("search")])])}],Nt={name:"Search",props:["search"],watch:{$route:function(){this.$emit("update:search","")}}},qt=Nt,It=(a("e589"),Object(b["a"])(qt,Tt,Et,!1,null,null,null)),Lt=It.exports,Rt={name:"Header",components:{Search:Lt},data:function(){return{headerText:"商品",targetModal:"#dashboardProductsModal",isOrder:!1}},methods:{openSidebarRequest:function(){this.$emit("open-sidebar-request")},openModal:function(){var t=this;t.$emit("update:isNewModal",!0),H()(t.targetModal).modal("show")},updateHeader:function(t){var e=this;switch(e.isOrder=!1,t){case"/dashboard/products":e.headerText="商品",e.targetModal="#dashboardProductsModal";break;case"/dashboard/orders":e.headerText="訂單",e.targetModal=!1,e.isOrder=!0;break;case"/dashboard/coupons":e.headerText="優惠券",e.targetModal="#dashboardCouponsModal";break;default:break}}},created:function(){var t=this.$route.path;this.updateHeader(t)},watch:{$route:function(t){this.updateHeader(t.path)}}},jt=Rt,Ft=(a("01fa"),Object(b["a"])(jt,At,St,!1,null,null,null)),Dt=Ft.exports,zt={name:"Dashboard",components:{Sidebar:Mt,Header:Dt},data:function(){return{isShow:!1,isNewModal:!1,search:""}},methods:{openSidebar:function(){var t=this;t.isShow=!0,H()("body").css("overflow","hidden")},closeSidebar:function(){var t=this;t.isShow=!1,H()("body").css("overflow","")}}},Vt=zt,Ht=(a("b985"),Object(b["a"])(Vt,yt,wt,!1,null,null,null)),Yt=Ht.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._m(0),a("div",{staticClass:"thin-banner"},[a("router-link",{staticClass:"thin-banner-link d-block d-sm-none h-100 w-100",attrs:{to:"promotion"}}),a("router-link",{staticClass:"btn btn-quaternary mr-lg-28 mr-md-20 mr-sm-16 d-none d-sm-block",attrs:{to:"promotion"}},[t._v("立即領取")])],1),a("div",{staticClass:"featured-list f-20 row"},[a("h2",{staticClass:"col-12 mb-16 mb-md-20 d-flex justify-content-between"},[t._m(1),a("router-link",{staticClass:"text-tertiary",attrs:{to:"products"}},[t._v(" 查看更多 "),a("span",{staticClass:"material-icons f-20 mr-8 lh-1-5"},[t._v("play_arrow")])])],1),t._l(t.recommendProducts,(function(e,s){return a("div",{key:e.id,staticClass:"card-wrap col-lg-3 col-md-4 col-6 d-lg-block mb-30 mb-sm-45",class:{hide:3===s}},[a("Card",t._b({attrs:{product:e},on:{"push-message":t.pushMessage}},"Card",t.$attrs,!1))],1)}))],2),a("div",{staticClass:"featured-banner-top row"},[a("div",{staticClass:"banner-content-left col-md-4 col-12"},[t._m(2),a("h3",{staticClass:"d-none d-md-block mb-md-16 mb-lg-24 mb-xl-32 f-16 f-lg-20 f-xl-24"},[t._v(" 即刻入手進口高品質躺椅讓度假不再需要出遠門！ ")]),a("router-link",{staticClass:"btn btn-outline-white-primary f-lg-20",attrs:{to:"/products/木椅"}},[t._v(" 去逛逛 ")])],1)]),a("div",{staticClass:"featured-banner-bottom row"},[a("div",{staticClass:"banner-content-right offset-md-8 col-md-4 col-12"},[t._m(3),a("h3",{staticClass:"d-none d-md-block mb-md-16 mb-lg-24 mb-xl-32 f-16 f-lg-20 f-xl-24"},[t._v(" 嚴選舒適美學沙發以及精緻抱枕直接一次擁有！ ")]),a("router-link",{staticClass:"btn btn-outline-white-dark f-lg-20",attrs:{to:"/products/沙發"}},[t._v(" 去逛逛 ")])],1)]),a("div",{staticClass:"newsletter"},[a("h2",{staticClass:"f-24 f-lg-30 f-xl-36 mb-12 w-100"},[t._v("訂閱電子報")]),a("h3",{staticClass:"f-16 f-lg-20 f-xl-24 mb-20 w-100"},[t._v("立即訂閱「奇木奇奇」，一手掌握所有好康優惠！")]),a("ValidationObserver",{ref:"form",staticClass:"d-flex align-items-start",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.subscribe(e)}}},[a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"email|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"newsletter-input form-control",class:{"is-invalid":r},attrs:{type:"email",placeholder:"請輸入您的電子郵件",autocomplete:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("button",{staticClass:"btn btn-tertiary mb-12",attrs:{type:"submit",value:"訂閱"}},[t._v("訂閱")])],1)],1)])},Ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleIndicators","data-ride":"carousel"}},[a("ol",{staticClass:"carousel-indicators"},[a("li",{staticClass:"active",attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"0"}}),a("li",{attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"1"}})]),a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item active carousel-banner-01"}),a("div",{staticClass:"carousel-item carousel-banner-02"})]),a("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"prev"}},[a("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[t._v("Previous")])]),a("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"next"}},[a("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[t._v("Next")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("span",{staticClass:"material-icons f-20 mr-8 lh-1-5"},[t._v("thumb_up")]),t._v("特色推薦商品 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"mr-16 mr-md-0 mb-lg-16 mb-xl-24 f-24 f-lg-30 f-xl-36"},[t._v(" 在家渡假好輕鬆 "),a("br"),t._v("躺椅享七折優惠 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"mr-16 mr-md-0 mb-lg-16 mb-xl-24 f-24 f-lg-30 f-xl-36"},[t._v(" 好看與舒適兼具 "),a("br"),t._v("不再只當視覺系 ")])}],Jt=(a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("router-link",{staticClass:"card-img-link",attrs:{to:"/product-info/"+t.product.id}},[a("img",{staticClass:"card-img",attrs:{src:t.product.imageUrl}})]),a("div",{staticClass:"card-body"},[a("a",{staticClass:"card-title",attrs:{href:"#"}},[a("h3",[t._v(t._s(t.product.title))])]),a("div",{staticClass:"product-price"},[a("del",{staticClass:"original-price"},[t._v(t._s(t._f("currency")(t.product.origin_price)))]),a("p",{staticClass:"on-sale-price"},[t._v(t._s(t._f("currency")(t.product.price)))])]),a("div",{staticClass:"card-btn-group"},[a("button",{staticClass:"btn-square btn-danger mr-12",class:[t.isRemove?"btn-danger":"btn-dark"],on:{click:function(e){return t.updateFavorite()}}},[a("transition",{attrs:{name:"base"}},[t.isRemove?a("span",{staticClass:"material-icons"},[t._v("favorite")]):t._e(),t.isRemove?t._e():a("span",{staticClass:"material-icons"},[t._v("favorite_border")])])],1),a("button",{staticClass:"btn-square btn-primary",on:{click:function(e){return t.addToShoppingCart(t.product.id)}}},[a("span",{staticClass:"material-icons"},[t._v("shopping_cart")])])])]),t.product.is_enabled?t._e():a("div",{staticClass:"sold-out"},[t._m(0)])],1)}),Wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"border border-white"},[a("p",[t._v("已售完")])])}],Kt={name:"Card",props:["product","favoriteProducts","shopping-cart"],data:function(){return{isRemove:!1,matchIndex:0}},methods:{updateFavorite:function(){var t=this;-1===t.matchIndex?(t.$set(t.product,"qty",1),t.$bus.$emit("favorite:update","add",t.product)):t.$bus.$emit("favorite:update","delete",void 0,t.matchIndex)},addToShoppingCart:function(t){var e=this,a=e.$loading.show({},{default:e.$createElement("LogoLoadingAnimation")}),s=e.shoppingCart.carts.filter((function(e){return e.product_id===t&&e})),r="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart"),o={};if(o.product_id=t,0!==s.length){var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart/").concat(s[0].id);o.qty=s[0].qty+1,e.$http.delete(i).then((function(){e.$http.post(r,{data:o}).then((function(){a.hide(),e.$bus.$emit("shopping-cart:update"),e.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}))}))}else o.qty=1,e.$http.post(r,{data:o}).then((function(){a.hide(),e.$bus.$emit("shopping-cart:update"),e.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}))},getBtnState:function(){var t=this;t.matchIndex=t.favoriteProducts.findIndex((function(e){return e.id===t.product.id})),-1===t.matchIndex?t.isRemove=!1:t.isRemove=!0}},watch:{favoriteProducts:function(){this.getBtnState()}},created:function(){this.getBtnState()}},Zt=Kt,Xt=(a("c582"),Object(b["a"])(Zt,Jt,Wt,!1,null,null,null)),Qt=Xt.exports,Gt={name:"Home",components:{Card:Qt},data:function(){return{products:[],recommendProducts:[],email:""}},methods:{getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/products/all"),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.get(e).then((function(e){t.products=e.data.products,t.productsFilter(),a.hide()}))},productsFilter:function(){var t=this,e=t.products.filter((function(t){return"特色推薦"===t.category&&t}));e=e.reverse().slice(0,4),t.recommendProducts=e},pushMessage:function(){this.$bus.$emit("message:push","成功","商品已成功加入購物車","success")},subscribe:function(){var t=this;t.$refs.form.validate().then((function(e){e&&(t.email="",t.$bus.$emit("message:push","成功","訂閱成功","success"))}))}},created:function(){this.getProducts()}},te=Gt,ee=(a("fc28"),Object(b["a"])(te,Bt,Ut,!1,null,null,null)),ae=ee.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container products"},[a("div",{staticClass:"row"},[a("div",{staticClass:"products-header col-12"},[a("div",{staticClass:"products-title mt-8 mt-lg-0"},[a("h1",{staticClass:"f-24 f-md-30 mr-12 mr-md-20 mb-0 font-weight-bold"},[t._v(" "+t._s(t.search?"搜尋關鍵詞："+t.search:t.currentCategory)+" ")]),a("h2",{staticClass:"f-16 mb-0"},[t._v(" 共"+t._s(t.search?t.searchProducts.length:t.categorizedProducts.length)+"件商品 ")])]),a("div",{staticClass:"products-filter mt-16 mt-lg-0 mb-20 mb-md-0"},[a("Search",{staticClass:"search-form mb-8 mb-md-0",attrs:{search:t.search},on:{"update:search":function(e){t.search=e}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortMethods.time,expression:"sortMethods.time"}],staticClass:"form-control flex-shrink-0\n        mr-8 mr-md-16 mr-lg-20 mb-0",attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sortMethods,"time",e.target.multiple?a:a[0])},function(e){return t.productsFilter(t.search?"":t.currentCategory,t.sortMethods.time)}]}},[a("option",{attrs:{value:"",disabled:""}},[t._v("時間")]),a("option",{attrs:{value:"新到舊"}},[t._v("新到舊")]),a("option",{attrs:{value:"舊到新"}},[t._v("舊到新")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortMethods.price,expression:"sortMethods.price"}],staticClass:"price form-control mr-8 mr-md-0",attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.sortMethods,"price",e.target.multiple?a:a[0])},function(e){return t.productsFilter(t.search?"":t.currentCategory,t.sortMethods.price)}]}},[a("option",{attrs:{value:"",disabled:""}},[t._v("價格")]),a("option",{attrs:{value:"低到高"}},[t._v("低到高")]),a("option",{attrs:{value:"高到低"}},[t._v("高到低")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentCategory,expression:"currentCategory"}],staticClass:"category form-control",attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentCategory=e.target.multiple?a:a[0]},function(e){return t.productsFilter(t.currentCategory,t.currentSortMethod)}]}},[a("option",[t._v("類別")]),t._l(t.category,(function(e,s){return a("option",{key:s,domProps:{value:e}},[t._v(t._s(e))])}))],2)],1)])]),a("div",{staticClass:"product-category"},t._l(t.category,(function(e,s){return a("button",{key:s,staticClass:"product-category-btn btn text-hover-light pl-8",class:{active:t.currentCategory===e},on:{click:function(a){return t.productsFilter(e,t.currentSortMethod)}}},[t._v(t._s(e))])})),0),a("div",{staticClass:"row product-list"},t._l(t.paginatedProducts,(function(e){return a("div",{key:e.id,staticClass:"col-lg-3 col-md-4 col-6 d-lg-block mb-20 mb-md-32 mb-lg-45"},[a("Card",t._b({attrs:{product:e},on:{"push-toast":t.pushMessage}},"Card",t.$attrs,!1))],1)})),0),t.search&&0===t.searchProducts.length||!t.search&&0===t.categorizedProducts.length?a("p",{staticClass:"f-30 font-weight-bold text-dark mt-20 mb-45"},[t._v('查無有關"'+t._s(t.search||t.currentCategory)+'"的商品')]):a("Pagination",{attrs:{pagination:t.pagination},on:{"change-page":t.changePage}})],1)},re=[],oe=(a("c975"),a("5319"),a("841c"),a("2909")),ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"pagination-wrap",attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[a("a",{staticClass:"page-link previous-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[a("span",{staticClass:"material-icons"},[t._v("keyboard_arrow_left")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pagination.current_page===e}},[a("a",{staticClass:"page-link num-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[a("a",{staticClass:"page-link next-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[a("span",{staticClass:"material-icons"},[t._v("keyboard_arrow_right")])])])],2)])},ne=[],ce={name:"Pagination",props:["pagination"],methods:{changePage:function(t){this.$emit("change-page",t),window.scrollTo(0,0)}}},le=ce,de=(a("5eaf"),Object(b["a"])(le,ie,ne,!1,null,null,null)),ue=de.exports,pe={name:"Product",components:{Card:Qt,Pagination:ue,Search:Lt},data:function(){return{allProducts:[],categorizedProducts:[],searchProducts:[],paginatedProducts:[],pagination:{},category:["全部商品","特色推薦","經典設計","木椅","塑膠椅","金屬椅","沙發"],categoryId:"",isPathHasCategory:!1,currentCategory:"全部商品",sortMethods:{time:"新到舊",price:""},currentSortMethod:"",search:""}},methods:{getProducts:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/products/all"),s=e.$loading.show({},{default:e.$createElement("LogoLoadingAnimation")});e.$http.get(a).then((function(a){e.allProducts=a.data.products,e.productsFilter(t),s.hide()}))},productsFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"全部商品",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"新到舊",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=this;""===s.categoryId||s.isPathHasCategory?s.isPathHasCategory=!1:s.$router.replace("/products").catch((function(t){return t})),s.search&&""!==t?(s.search="",s.currentCategory=t):s.search||""===t||(s.currentCategory=t),s.categorizeProducts(s.currentCategory);var r=s.search?s.searchProducts:s.categorizedProducts;s.currentSortMethod=e,s.sortProducts(r),s.getPagination(a,r),s.paginateProducts(r)},categorizeProducts:function(t){var e,a=this;a.currentCategory=t,"全部商品"!==a.currentCategory?(e=a.allProducts.filter((function(t){return a.currentCategory===t.category&&t})),a.categorizedProducts=e):a.categorizedProducts=Object(oe["a"])(a.allProducts)},sortProducts:function(t){var e=this,a=t;e.currentSortMethod===e.sortMethods.time?e.sortMethods.price="":e.currentSortMethod===e.sortMethods.price&&(e.sortMethods.time=""),"新到舊"===e.sortMethods.time&&(a=a.reverse()),a.sort((function(t,a){return"低到高"===e.sortMethods.price?t.price-a.price:"高到低"===e.sortMethods.price&&a.price-t.price}))},getPagination:function(t,e){var a=this,s=e,r=s.length;a.$set(a.pagination,"current_page",t),r%12!==0?a.$set(a.pagination,"total_pages",Math.floor(r/12)+1):a.$set(a.pagination,"total_pages",Math.floor(r/12)),1===t?a.$set(a.pagination,"has_pre",!1):a.$set(a.pagination,"has_pre",!0),t<a.pagination.total_pages?a.$set(a.pagination,"has_next",!0):a.$set(a.pagination,"has_next",!1)},paginateProducts:function(t){var e=this,a=t,s=12*(e.pagination.current_page-1),r=a.filter((function(t,e){return s<=e&&s+11>=e&&t}));e.paginatedProducts=r},changePage:function(t){var e=this,a=e.search?e.searchProducts:e.categorizedProducts;e.pagination.current_page=t,1===t?e.$set(e.pagination,"has_pre",!1):e.$set(e.pagination,"has_pre",!0),t<e.pagination.total_pages?e.$set(e.pagination,"has_next",!0):e.$set(e.pagination,"has_next",!1),e.paginateProducts(a)},pushMessage:function(){this.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}},watch:{search:function(){var t=this;if(t.search){var e=t.allProducts.filter((function(e){var a=e.category+e.title+e.origin_price+e.price;return a.indexOf(t.search)>-1&&e}));e.length?t.searchProducts=e:t.searchProducts=[]}t.productsFilter("")}},created:function(){var t=this;t.categoryId=t.$route.params.id;var e=t.category.indexOf(t.categoryId);-1!==e?(t.isPathHasCategory=!0,t.getProducts(t.categoryId)):void 0===t.categoryId?t.getProducts():t.$router.replace("/products").catch((function(t){return t}))}},me=pe,fe=(a("3fe5"),Object(b["a"])(me,se,re,!1,null,null,null)),ve=fe.exports,he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"promotion container mb-lg-60 mb-md-45 mb-32"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 d-flex justify-content-center flex-column align-items-center"},[s("img",{staticClass:"px-12",attrs:{src:a("23b0")}}),s("p",{staticClass:"instruction f-20"},[t._v(" "+t._s(t.playMethod)+"交換位置 "),s("span",{staticClass:"material-icons ml-8"},[t._v("swap_horiz")])])]),s("div",{staticClass:"col-12 puzzle-wrap"},[s("div",{staticClass:"puzzle"},t._l(9,(function(e){return s("div",{key:e,staticClass:"puzzle-piece"},[s("img",{staticClass:"puzzle-piece-img",class:{start:t.targetStartNum===e-1,enter:t.targetEnterNum===e-1},attrs:{src:a("e078")("./"+t.currentImgNameOrder[e-1]+".png"),draggable:"true","data-num":e-1},on:{mousedown:function(e){return t.classChange(e,"start")},mouseup:function(e){return t.classChange(e,"cancel")},dragstart:t.dragStart,dragover:function(t){t.preventDefault()},dragenter:function(e){return e.preventDefault(),t.dragEnter(e)},dragend:t.dragEnd,drop:t.dropped,touchstart:t.touchStart}})])})),0)])]),s("div",{staticClass:"puzzleCompleteModal modal fade",attrs:{id:"puzzleCompleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},[s("p",{staticClass:"f-28 f-md-32 font-weight-bold"},[t._v("恭喜獲得")]),s("p",{staticClass:"f-28 f-md-32 font-weight-bold text-primary"},[t._v("八折券序號一組")]),s("p",{staticClass:"f-16 f-md-20"},[t._v("在購物車輸入此序號可享八折優惠")]),s("input",{staticClass:"coupon border border-secondary",attrs:{type:"text",readonly:""},domProps:{value:t.coupon}})]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-tertiary",on:{click:t.copyCoupon}},[t._v("複製")])])])])])])},ge=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalCenterTitle"}},[t._v("完成拼圖！")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],be=(a("d3b7"),a("25f0"),function(t){t.select(),t.setSelectionRange(0,99999),document.execCommand("copy")}),_e={name:"Promotion",components:{},data:function(){return{correctImgNameOrder:["NAgNF3","oTFmIM","OUOLxK","5mCpxc","d2u7eB","KDgw03","nRxxZe","2A1Uz0","BHft40"],currentImgNameOrder:[],targetStartNum:!1,targetEnterNum:!1,isComplete:!1,playMethod:"拖移",coupon:""}},methods:{getRandomOrder:function(){var t,e=[0,1,2,3,4,5,6,7,8],a=[],s=0;while(s<9)t=Math.floor(Math.random()*e.length),a.push(e[t]),e.splice(t,1),s+=1;return a},classChange:function(t,e){var a=this;switch(e){case"start":a.targetStartNum=parseInt(t.target.dataset.num,10);break;case"enter":a.targetEnterNum=parseInt(t.target.dataset.num,10);break;case"cancel":a.targetStartNum=!1,a.targetEnterNum=!1;break;default:break}},dragStart:function(t){var e=this;e.classChange(t,"start"),t.dataTransfer.setData("text/plain",t.target.dataset.num)},dragEnter:function(t){var e=this;e.classChange(t,"enter")},dragEnd:function(){var t=this;t.classChange("none","cancel")},dropped:function(t){var e=this,a=t.dataTransfer.getData("text/plain"),s=parseInt(t.target.dataset.num,10);e.changePuzzlePlace(a,s),e.classChange("none","cancel"),e.isPuzzleComplete()},changePuzzlePlace:function(t,e){var a=this,s=a.currentImgNameOrder,r=[s[e],s[t]];s[t]=r[0],s[e]=r[1],a.currentImgNameOrder=s},isPuzzleComplete:function(){var t=this;t.correctImgNameOrder.toString()===t.currentImgNameOrder.toString()&&setTimeout((function(){t.coupon="CHIMOOCHIOPEN",H()("#puzzleCompleteModal").modal("show")}),300)},touchStart:function(t){var e=this,a=parseInt(t.target.dataset.num,10),s=e.targetStartNum;t.preventDefault(),a!==s?s?(e.classChange("none","cancel"),e.changePuzzlePlace(a,s),e.isPuzzleComplete()):e.classChange(t,"start"):e.classChange("none","cancel")},copyCoupon:function(){var t=this,e=H()(".coupon")[0];be(e),t.$bus.$emit("message:push","成功","優惠券已經複製到剪貼簿","success")}},created:function(){var t=this,e=t.getRandomOrder();null===window.ontouchstart&&(t.playMethod="點擊"),e.forEach((function(e){var a="".concat(t.correctImgNameOrder[e]);t.currentImgNameOrder.push(a)}))}},Ce=_e,ye=(a("b0bd"),Object(b["a"])(Ce,he,ge,!1,null,null,null)),we=ye.exports,xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Breadcrumb",{staticClass:"mb-16",attrs:{product:t.product}}),a("div",{staticClass:"row product-info"},[a("div",{staticClass:"col-md-6 col-12 product-info-img-link"},[a("img",{attrs:{src:t.product.imageUrl}})]),a("div",{staticClass:"col-12 col-md-6 text-left d-flex flex-column"},[a("p",{staticClass:"badge badge-secondary"},[t._v(t._s(t.product.category))]),a("h1",{staticClass:"f-lg-30 f-24 mb-lg-32 mb-md-24 mb-16"},[t._v(t._s(t.product.title))]),a("div",{staticClass:"product-info-price"},[a("p",{staticClass:"text-danger f-lg-28 f-20 font-weight-bold mr-lg-24\n        mr-12"},[t._v(t._s(t._f("currency")(t.product.price)))]),a("del",{staticClass:"f-lg-20 f-16 text-dark"},[t._v(t._s(t._f("currency")(t.product.origin_price)))])]),a("h2",{staticClass:"font-weight-bold f-16 f-md-20"},[t._v(" 產品尺寸 ")]),t._m(0),a("h2",{staticClass:"font-weight-bold f-16 f-md-20"},[t._v(" 產品說明 ")]),a("p",{staticClass:"f-14 f-md-16 mb-lg-45 mb-md-24 mb-24"},[t._v(" 皮製經典復古沙發，是由多位大師級的工匠和設計師， 經過不容妥協的選材和設計，再經由專家嚴格的多項耐用性和安全性的測試， 聯手打造出兼具尊爵的視覺饗宴以及最高等級的使用體驗的產品。 ")]),a("div",{staticClass:"d-flex align-items-center"},[a("span",{staticClass:"f-lg-20 mr-lg-32 mr-16"},[t._v("數量：")]),a("Counter",{attrs:{unit:t.product.unit,qty:t.qty},on:{"update:qty":function(e){t.qty=e}}})],1),a("div",{staticClass:"product-info-btn-group"},[a("button",{staticClass:"btn product-info-favorite",class:[t.isRemove?"btn-danger":"btn-dark"],on:{click:function(e){return t.updateFavorite()}}},[t._v(t._s(t.isRemove?"從我的最愛移除":"加入我的最愛"))]),a("button",{staticClass:"btn btn-tertiary product-info-cart",on:{click:function(e){return t.addToShoppingCart(t.product.id)}}},[t._v("加入購物車")])])])])],1)},Pe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"f-14 f-sm-16 mb-lg-20 mb-md-24 mb-20"},[t._v(" 尺寸: 長1.2m x 寬0.6m x 高1.0m"),a("br"),t._v("材質: 皮革、泡棉、木材 ")])}],$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb pt-8 pb-0 f-14 f-md-16"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{staticClass:"d-flex align-items-center",attrs:{to:"/"}},[a("span",{staticClass:"material-icons f-20 f-md-24"},[t._v("location_on")]),t._v(" 首頁 ")])],1),a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:"/products"}},[t._v("本店商品")])],1),a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:"/products/"+t.product.category}},[t._v(t._s(t.product.category))])],1),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(t._s(t.product.title))])])])},ke=[],Oe={name:"Breadcrumb",props:["product"]},Me=Oe,Ae=Object(b["a"])(Me,$e,ke,!1,null,null,null),Se=Ae.exports,Te={name:"ProductInfo",components:{Breadcrumb:Se,Counter:et},props:["favoriteProducts","shopping-cart"],data:function(){return{product:{},productId:"",qty:1,matchIndex:0,isRemove:!1}},methods:{getProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/product/").concat(t.productId),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.get(e).then((function(e){e.data.success?(t.product=e.data.product,t.getBtnState()):t.$router.push("/"),a.hide()}))},updateFavorite:function(){var t=this;-1===t.matchIndex?(t.$set(t.product,"qty",t.qty),t.$bus.$emit("favorite:update","add",t.product)):t.$bus.$emit("favorite:update","delete",void 0,t.matchIndex)},addToShoppingCart:function(t){var e=this,a=e.$loading.show({},{default:e.$createElement("LogoLoadingAnimation")}),s=e.shoppingCart.carts.filter((function(e){return e.product_id===t&&e})),r={},o="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart");if(r.product_id=t,0!==s.length){var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart/").concat(s[0].id);r.qty=s[0].qty+e.qty,e.$http.delete(i).then((function(){e.$http.post(o,{data:r}).then((function(){a.hide(),e.$bus.$emit("shopping-cart:update"),e.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}))}))}else r.qty=e.qty,e.$http.post(o,{data:r}).then((function(){a.hide(),e.$bus.$emit("shopping-cart:update"),e.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}))},getBtnState:function(){var t=this;t.matchIndex=t.favoriteProducts.findIndex((function(e){return e.id===t.product.id})),-1===t.matchIndex?t.isRemove=!1:t.isRemove=!0}},watch:{favoriteProducts:function(){this.getBtnState()}},created:function(){var t=this;t.productId=t.$route.params.id,t.getProduct()}},Ee=Te,Ne=(a("76e8"),Object(b["a"])(Ee,xe,Pe,!1,null,null,null)),qe=Ne.exports,Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"f-lg-30 f-24 mt-lg-16 mb-lg-45 mt-12 mb-30 w-100"},[t._v("購物車清單")]),a("div",{staticClass:"col-lg-8 col-md-7"},[a("ul",{staticClass:"shopping-cart-list p-0 m-0"},t._l(t.shoppingCart.carts,(function(e){return a("li",{key:e.id,staticClass:"shopping-cart-list-item mb-24"},[a("div",{staticClass:"product-img"},[a("img",{attrs:{src:e.product.imageUrl}})]),a("h2",{staticClass:"tilte f-16\n          text-overflow text-left"},[t._v(t._s(e.product.title))]),a("Counter",{attrs:{qty:e.qty,unit:e.product.unit},on:{"update:qty":function(a){return t.changeShoppingCartPage(e,a)},"update:unit":function(a){return t.$set(e.product,"unit",a)}}}),a("p",{staticClass:"price font-weight-bold"},[t._v(" "+t._s(t._f("currency")(e.coupon?e.total*(e.coupon.percent/100):e.total))+" "),a("br"),e.coupon?a("span",{staticClass:"f-14 text-primary"},[t._v("已套用優惠券")]):t._e()]),a("button",{staticClass:"btn-square btn-outline-danger shopping-cart-list-item-delete-btn",on:{click:function(a){return t.openDeleteModal(e)}}},[a("span",{staticClass:"material-icons"},[t._v("delete")])])],1)})),0),"carts"in t.shoppingCart&&0!==t.shoppingCart.carts.length?t._e():a("div",{staticClass:"h-100 d-flex justify-content-center align-content-center flex-wrap py-45"},[a("p",{staticClass:"f-20 f-md-24 w-100 mb-20"},[t._v("購物車內沒有商品喔！")]),a("router-link",{staticClass:"btn btn-tertiary",attrs:{to:"products"}},[t._v("去逛逛")])],1)]),a("div",{staticClass:" col-lg-4 col-md-5 total text-left"},[a("div",{staticClass:"total-body",class:{fixed:t.isFixed}},[a("p",{staticClass:"flex-grow-1"},[t._v("商品共計")]),a("p",{staticClass:"flex-grow-1 font-weight-bold text-right"},[t._v(" "+t._s(t._f("currency")(t.shoppingCart.total))+" ")]),a("div",{staticClass:"total-coupon mt-20"},[a("ValidationObserver",{ref:"form",staticClass:"w-100",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.applyCoupon(e)}}},[a("ValidationProvider",{attrs:{tag:"div",rules:"alpha_dash"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("div",{staticClass:"d-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon,expression:"coupon"}],staticClass:"total-coupon-input form-control mr-16",class:{"is-invalid":r},attrs:{type:"text",placeholder:"請輸入優惠券序號"},domProps:{value:t.coupon},on:{input:function(e){e.target.composing||(t.coupon=e.target.value)}}}),a("button",{staticClass:"btn btn-secondary flex-shrink-0 total-coupon-apply-btn",attrs:{type:"submit"}},[t._v("套用")])]),a("div",{staticClass:"invalid-feedback",style:{display:r?"block":"none"}},[t._v(t._s(s[0]))])]}}])})],1)],1),a("p",{staticClass:"mt-20 w-75"},[t._v("優惠券折抵")]),a("p",{staticClass:"mt-20 font-weight-bold text-right w-25"},[t._v(" "+t._s(t._f("currency")(t.shoppingCart.total-t.shoppingCart.final_total))+" ")]),a("p",{staticClass:"mt-20 w-25"},[t._v("合計")]),a("p",{staticClass:"f-24 font-weight-bold mt-20 text-danger text-right w-75"},[t._v(" "+t._s(t._f("currency")(t.shoppingCart.final_total))+" ")]),a("router-link",{staticClass:"btn btn-tertiary mt-20 w-100",attrs:{to:"/checkout/order-form"}},[t._v("結帳去")])],1)])]),a("div",{staticClass:"modal fade",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-sm modal-dialog-centered ",attrs:{role:"document"}},[a("div",{staticClass:"delete-modal-content modal-content"},[t._m(0),a("div",{staticClass:"modal-body f-20"},[t._v(' 確定要從購物車刪除商品"'+t._s(t.deleteModalMsg)+'"嗎?" ')]),a("div",{staticClass:"modal-footer delete-modal-footer"},[a("button",{staticClass:"cancel-btn btn btn-white",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"delete-btn btn btn-outline-white",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v("確定刪除")])])])])])])},Le=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"deleteModalLabel"}},[t._v("刪除")]),a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Re={name:"ShoppingCart",components:{Counter:et},props:["shoppingCart"],data:function(){return{tempProductId:"",deleteModalMsg:"",isFixed:!1,coupon:"",couponMessage:""}},methods:{updateShoppingCart:function(){this.$bus.$emit("shopping-cart:update")},openDeleteModal:function(t){var e=this;H()("#deleteModal").modal("show"),e.deleteModalMsg=t.product.title,e.tempProductId=t.id},deleteProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart/").concat(t.tempProductId),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.delete(e).then((function(){a.hide(),H()("#deleteModal").modal("hide"),t.updateShoppingCart()}))},changeShoppingCartPage:function(t,e){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/cart"),r=a.$loading.show({},{default:a.$createElement("LogoLoadingAnimation")}),o=t;o.qty=e,a.tempProductId=o.id,a.deleteProduct(),a.$http.post(s,{data:t}).then((function(){r.hide(),a.$bus.$emit("shopping-cart:update"),a.$bus.$emit("message:push","成功","商品已成功加入購物車","success")}))},applyCoupon:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/coupon");t.$refs.form.validate().then((function(a){if(a){var s=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.post(e,{data:{code:t.coupon}}).then((function(e){e.data.success?(t.couponMessage=e.data.message,t.$bus.$emit("message:push","成功",e.data.message,"success")):t.$bus.$emit("message:push","錯誤",e.data.message,"danger"),s.hide(),t.updateShoppingCart()}))}}))}},mounted:function(){var t=this;H()(window).scroll((function(){H()(window).scrollTop()>182?t.isFixed=!0:t.isFixed=!1}))},destroyed:function(){H()(window).off("scroll")}},je=Re,Fe=(a("7f9e"),Object(b["a"])(je,Ie,Le,!1,null,null,null)),De=Fe.exports,ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container d-flex justify-content-center flex-wrap"},[a("div",{staticClass:"checkout-flowchart mt-32"},[a("div",{staticClass:"checkout-flowchart-status-frame"},[a("div",{staticClass:"checkout-flowchart-status",class:{active:t.isOrderForm}})]),a("div",{staticClass:"checkout-flowchart-status-frame"},[a("div",{staticClass:"checkout-flowchart-status",class:{active:t.isPayment}})]),a("div",{staticClass:"checkout-flowchart-status-frame"},[a("div",{staticClass:"checkout-flowchart-status",class:{active:t.isPaymentStatus}})]),a("div",{staticClass:"checkout-flowchart-line"}),t._m(0)]),a("router-view",t._b({attrs:{order:t.order,"order-id":t.orderId,"order-total":t.orderTotal,"is-paid":t.isPaid},on:{"update:order":function(e){t.order=e},"update:orderId":function(e){t.orderId=e},"update:order-id":function(e){t.orderId=e},"update:orderTotal":function(e){t.orderTotal=e},"update:order-total":function(e){t.orderTotal=e},"update:isPaid":function(e){t.isPaid=e},"update:is-paid":function(e){t.isPaid=e}}},"router-view",t.$attrs,!1))],1)},Ve=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"checkout-flowchart-title mb-32"},[a("li",[t._v("訂單資料")]),a("li",[t._v("確認付款")]),a("li",[t._v("完成購買")])])}],He={name:"Checkout",data:function(){return{isOrderForm:!0,isPayment:!1,isPaymentStatus:!1,order:{},orderId:"",orderTotal:0,isPaid:!1}},methods:{updateClass:function(t){var e=this;switch(e.isOrderForm=!1,e.isPayment=!1,e.isPaymentStatus=!1,t){case"/checkout/order-form":e.isOrderForm=!0;break;case"/checkout/payment":e.isPayment=!0;break;case"/checkout/payment-status":e.isPaymentStatus=!0;break;default:break}}},created:function(){var t=this.$route.path;this.updateClass(t)},watch:{$route:function(t){this.updateClass(t.path)}}},Ye=He,Be=(a("9de2"),Object(b["a"])(Ye,ze,Ve,!1,null,null,null)),Ue=Be.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row w-100 mb-lg-90 mb-md-60 mb-45"},[a("div",{staticClass:"order-form-wrap col-12 col-md-10 col-lg-8 d-flex flex-wrap justify-content-center\n  offset-lg-2 offset-md-1 p-md-24 p-sm-16 p-12"},[a("h1",{staticClass:"f-lg-30 f-24 mt-8 mb-32 w-100"},[t._v("訂單資料")]),t._m(0),a("div",{staticClass:"collapse w-100",attrs:{id:"order-form-table"}},[a("ShoppingCartListTable",t._b({},"ShoppingCartListTable",t.$attrs,!1))],1),a("ValidationObserver",{ref:"form",staticClass:"order-form",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.setOrder(e)}}},[a("ValidationProvider",{staticClass:"order-form-group form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{staticClass:"w-100 text-left",attrs:{for:"user-name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.user.name,expression:"order.user.name"}],staticClass:"order-form-input form-control",class:{"is-invalid":r},attrs:{type:"text",id:"user-name",placeholder:"請輸入姓名",autocomplete:"name"},domProps:{value:t.order.user.name},on:{input:function(e){e.target.composing||t.$set(t.order.user,"name",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("p",{staticClass:"text-left w-100 mb-8"},[t._v("地址")]),a("div",{staticClass:"d-flex w-100 align-items-start"},[a("ValidationProvider",{staticClass:"order-form-group form-group pr-4 mb-8",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectCountyIndex,expression:"selectCountyIndex"}],staticClass:"form-control px-md-24 px-16",class:{"is-invalid":r},attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectCountyIndex=e.target.multiple?a:a[0]},function(e){return t.getRegion(t.selectCountyIndex)}]}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("請選擇縣市")]),t._l(t.areaList,(function(e,s){return a("option",{key:e.county,domProps:{value:s}},[t._v(" "+t._s(e.county)+" ")])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"order-form-group form-group pl-4 mb-8",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectRegion,expression:"selectRegion"}],staticClass:"form-control px-md-24 px-16",class:{"is-invalid":r},attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectRegion=e.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("請選擇鄉鎮區")]),t._l(t.regionList,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("ValidationProvider",{staticClass:"order-form-group form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempAddress,expression:"tempAddress"}],staticClass:"order-form-input form-control",class:{"is-invalid":r},attrs:{type:"text",placeholder:"請輸入地址",autocomplete:"on"},domProps:{value:t.tempAddress},on:{input:function(e){e.target.composing||(t.tempAddress=e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"order-form-group form-group",attrs:{rules:"required|numeric|max:10",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"mobile-phone"}},[t._v("手機")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.user.tel,expression:"order.user.tel"}],staticClass:"order-form-input form-control",class:{"is-invalid":r},attrs:{type:"text",id:"mobile-phone",placeholder:"請輸入手機號碼",autocomplete:"on"},domProps:{value:t.order.user.tel},on:{input:function(e){e.target.composing||t.$set(t.order.user,"tel",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"order-form-group form-group",attrs:{rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"email"}},[t._v("電子信箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.user.email,expression:"order.user.email"}],staticClass:"order-form-input form-control",class:{"is-invalid":r},attrs:{type:"email",id:"email",placeholder:"請輸入電子信箱",autocomplete:"email"},domProps:{value:t.order.user.email},on:{input:function(e){e.target.composing||t.$set(t.order.user,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("div",{staticClass:"order-form-group form-group"},[a("label",{staticClass:"textarea-form-label",attrs:{for:"notes"}},[t._v("備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.order.message,expression:"order.message"}],staticClass:"form-control border-0 form-textarea",attrs:{id:"notes",rows:"3",autocomplete:"on"},domProps:{value:t.order.message},on:{input:function(e){e.target.composing||t.$set(t.order,"message",e.target.value)}}})]),a("div",{staticClass:"d-flex mt-md-32 mt-24\n      justify-content-between w-100"},[a("router-link",{staticClass:"btn btn-dark",attrs:{to:"/shopping-cart"}},[t._v("回購物車")]),a("button",{staticClass:"btn btn-tertiary",attrs:{type:"submit"}},[t._v("開始結帳")])],1)],1)],1)])},We=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"order-form-cart-list-btn btn btn-outline-secondary\n      d-flex justify-content-center f-16 mb-20",attrs:{"data-toggle":"collapse","data-target":"#order-form-table"}},[t._v(" 購物車清單 "),a("span",{staticClass:"material-icons"},[t._v("arrow_drop_down")])])}],Ke=(a("1276"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-white table-borderless text-left mb-32 f-14 f-md-16"},[a("tbody",t._l(t.shoppingCart.carts,(function(e){return a("tr",{key:e.id,staticClass:"tbody-tr"},[a("td",[t._v(t._s(e.product.title))]),a("td",{staticClass:"text-nowrap"},[t._v(t._s(e.qty+"/"+e.product.unit))]),a("td",[t._v(t._s(t._f("currency")(e.coupon?e.total*(e.coupon.percent/100):e.total)))])])})),0),a("tfoot",{staticClass:"tfoot"},[a("tr",[a("td"),a("td",{staticClass:"text-nowrap"},[t._v("優惠券折抵")]),a("td",[t._v(t._s(t._f("currency")(t.shoppingCart.total-t.shoppingCart.final_total)))])]),a("tr",[a("td"),a("td",[t._v("合計")]),a("td",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t._f("currency")(t.shoppingCart.final_total)))])])])])}),Ze=[],Xe={name:"ShoppingCartListTable",props:["shoppingCart"]},Qe=Xe,Ge=(a("0ed0"),Object(b["a"])(Qe,Ke,Ze,!1,null,"e60634aa",null)),ta=Ge.exports,ea=a("dbf1"),aa={name:"OrderForm",components:{ShoppingCartListTable:ta},data:function(){return{order:{user:{name:"",email:"",tel:"",address:""},message:""},areaList:ea,regionList:[],selectCountyIndex:"",selectRegion:"",tempAddress:""}},methods:{setOrder:function(){var t=this;t.$refs.form.validate().then((function(e){if(e){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/order"),s=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.selectRegion=t.selectRegion.split(" "),t.order.user.address="".concat(t.selectRegion[1]," ").concat(t.areaList[t.selectCountyIndex].county).concat(t.selectRegion[0]).concat(t.tempAddress),t.$http.post(a,{data:t.order}).then((function(e){e.data.success?(t.$emit("update:order",t.order),t.$emit("update:order-id",e.data.orderId),t.$emit("update:order-total",e.data.total),t.$router.push("payment")):t.$bus.$emit("message:push","失敗",e.data.message,"danger"),s.hide()}))}}))},getRegion:function(t){""!==t&&(this.regionList=this.areaList[t].region)}}},sa=aa,ra=(a("9435"),Object(b["a"])(sa,Je,We,!1,null,null,null)),oa=ra.exports,ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row w-100 mb-lg-90 mb-md-60 mb-45"},[a("div",{staticClass:"payment-wrap col-12 col-md-10 col-lg-8 d-flex flex-wrap justify-content-center\n    offset-md-1 offset-lg-2 p-md-24 p-16"},[a("h1",{staticClass:"f-lg-30 f-24 mt-8 mb-32 w-100"},[t._v("確認付款")]),a("ShoppingCartListTable",{attrs:{"shopping-cart":t.orderShoppingCart}}),a("table",{staticClass:"orderer-info-table table table-white f-14 f-md-16"},[a("tbody",[a("tr",[a("td",[t._v("姓名")]),a("td",[t._v(t._s(t.checkOrder.order.user.name))])]),a("tr",[a("td",[t._v("手機")]),a("td",[t._v(t._s(t.checkOrder.order.user.tel))])]),a("tr",[a("td",[t._v("電子郵件")]),a("td",[t._v(t._s(t.checkOrder.order.user.email))])]),a("tr",[a("td",[t._v("地址")]),a("td",[t._v(t._s(t.checkOrder.order.user.address))])]),a("tr",[a("td",[t._v("備註")]),a("td",[t._v(t._s(t.checkOrder.order.message))])]),t._m(0)])]),a("div",{staticClass:"d-flex mt-md-32 mt-24 justify-content-between"},[a("button",{staticClass:"btn btn-tertiary",on:{click:t.checkOut}},[t._v("確認付款")])])],1)])},na=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("付款狀態")]),a("td",{staticClass:"text-danger"},[t._v("未付款")])])}],ca={name:"Payment",components:{ShoppingCartListTable:ta},props:["shoppingCart","order","orderId"],data:function(){return{orderShoppingCart:{},checkOrder:{order:{user:this.order.user||{},message:this.order.message||""},orderId:this.orderId}}},methods:{checkOut:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/pay/").concat(t.checkOrder.orderId),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.post(e).then((function(e){e.data.success?(t.$emit("update:is-paid",!0),t.$bus.$emit("message:push","成功",e.data.message,"success"),t.$router.push("payment-status")):t.$bus.$emit("message:push","失敗",e.data.message,"danger"),a.hide()}))},copyShoppingCart:function(){var t=this;t.orderShoppingCart=JSON.stringify(t.shoppingCart),t.orderShoppingCart=JSON.parse(t.orderShoppingCart)}},created:function(){var t=this;t.copyShoppingCart(),"carts"in t.orderShoppingCart&&0!==t.orderShoppingCart.carts.length?t.$bus.$emit("shopping-cart:update"):t.$router.push("/shopping-cart")}},la=ca,da=(a("fb1d"),Object(b["a"])(la,ia,na,!1,null,null,null)),ua=da.exports,pa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row justify-content-center flex-column w-100 mt-lg-36 mt-md-20 mt-0"},[s("img",{attrs:{src:a("d3bf")}}),s("h1",{staticClass:"font-weight-bold f-28 f-md-30 mt-20 mt-md-24"},[t._v("付款成功")]),t._m(0),s("div",{staticClass:"d-flex flex-wrap justify-content-center mb-24"},[t.orderTotal>3e3?s("div",[t._m(1),s("div",{staticClass:"order-id-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.extraCoupon,expression:"extraCoupon"}],staticClass:"order-id-input border-0",attrs:{id:"extra-coupon",type:"text",readonly:""},domProps:{value:t.extraCoupon},on:{input:function(e){e.target.composing||(t.extraCoupon=e.target.value)}}}),s("button",{staticClass:"order-id-btn btn-square border-0",on:{click:function(e){return t.copyInput("#extra-coupon")}}},[s("span",{staticClass:"material-icons"},[t._v("content_copy")])])])]):t._e(),s("p",{staticClass:"w-100 mb-12"},[t._v("訂單編號")]),s("div",{staticClass:"order-id-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.orderId,expression:"orderId"}],staticClass:"order-id-input border-0",attrs:{id:"order-id",type:"text",readonly:""},domProps:{value:t.orderId},on:{input:function(e){e.target.composing||(t.orderId=e.target.value)}}}),s("button",{staticClass:"order-id-btn btn-square border-0",on:{click:function(e){return t.copyInput("#order-id")}}},[s("span",{staticClass:"material-icons"},[t._v("content_copy")])])])]),s("div",{staticClass:"d-flex justify-content-center mb-lg-90 mb-md-60 mb-45"},[s("router-link",{staticClass:"btn btn-tertiary",attrs:{to:"/products"}},[t._v("繼續選購")])],1),s("Toast")],1)},ma=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"f-16 f-md-20 mb-24"},[t._v("感謝您的購買！"),a("br"),t._v("商品將於2-7天內送達")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"w-100 mb-12 font-weight-bold text-danger f-20"},[t._v("您的購物滿$3000"),a("br"),t._v("獲得七折優惠券！")])}],fa={name:"PaymentStatus",components:{Toast:E},props:["orderId","isPaid","orderTotal"],data:function(){return{order:{},extraCoupon:"CHIMOOCHI3000"}},methods:{copyInput:function(t){var e=this,a=H()(t)[0],s="";be(a),"#order-id"===t?s="訂單編號":"#extra-coupon"===t&&(s="優惠券"),e.$bus.$emit("message:push","成功","".concat(s,"已經複製到剪貼簿"),"success")}},created:function(){var t=this;t.isPaid||t.$router.push("/shopping-cart")},destroyed:function(){this.$emit("update:is-paid",!1)}},va=fa,ha=(a("6a7a"),Object(b["a"])(va,pa,ma,!1,null,null,null)),ga=ha.exports,ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-products w-100"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"responsive"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.productsFilter("category")}}},[t._v(" 類別 "),a("span",{staticClass:"material-icons",class:{active:"category"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",[a("button",{staticClass:"btn p-0 font-weight-bold",on:{click:function(e){return t.productsFilter("title")}}},[t._v(" 名稱 "),a("span",{staticClass:"material-icons",class:{active:"title"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"responsive"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.productsFilter("origin_price")}}},[t._v(" 原價 "),a("span",{staticClass:"material-icons",class:{active:"origin_price"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"pl-12"},[a("button",{staticClass:"btn p-0 font-weight-bold",on:{click:function(e){return t.productsFilter("price")}}},[t._v(" 售價 "),a("span",{staticClass:"material-icons",class:{active:"price"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"nowrap"},[a("button",{staticClass:"btn p-0 font-weight-bold",on:{click:function(e){return t.productsFilter("is_enabled")}}},[t._v(" 啟用狀態 "),a("span",{staticClass:"material-icons",class:{active:"is_enabled"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),t._m(0)])]),a("tbody",t._l(t.paginatedProducts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"responsive"},[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"responsive"},[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",{staticClass:"font-weight-bold text-danger pl-12"},[t._v(t._s(t._f("currency")(e.price)))]),a("td",{staticClass:"font-weight-bold nowrap status",class:[e.is_enabled?"text-primary":"text-light"]},[t._v(t._s(e.is_enabled?"啟用中":"未啟用")+" ")]),a("td",{staticClass:"text-right nowrap info-edit"},[a("button",{staticClass:"btn-square btn-outline-secondary",on:{click:function(a){return t.openEditModal(e)}}},[a("span",{staticClass:"material-icons"},[t._v("edit")])])])])})),0)]),a("Pagination",{attrs:{pagination:t.pagination},on:{"change-page":t.changePage}}),a("div",{staticClass:"dashboard-poducts-modal modal fade",attrs:{id:"dashboardProductsModal",tabindex:"-1",role:"dialog","aria-labelledby":"dashboardProductsModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"dashboardProductsModalLabel"}},[t._v(" "+t._s(t.isNewModal?"商品建立":"商品編輯")+" ")]),t._m(1)]),a("ValidationObserver",{ref:"form",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.updateProducts(t.isNewModal?"建立":"修改")}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-12 col-md-6 pl-0 pr-0 pr-md-12 d-flex flex-column\n              justify-content-between"},[a("div",{staticClass:"img-frame"},[a("img",{attrs:{src:t.tempProduct.imageUrl}})]),a("div",[a("div",{staticClass:"d-flex align-items-center mb-12 mt-16 mt-md-0"},[a("p",{staticClass:"mr-8"},[t._v("圖片來源")]),a("div",{staticClass:"spinner-border",class:{show:t.isLoading},attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])]),a("div",[a("button",{staticClass:"btn btn-outline-secondary mr-16",class:{active:"upload"===t.imgLoadMethod},attrs:{type:"button"},on:{click:function(e){t.imgLoadMethod="upload"}}},[t._v("上傳 ")]),a("button",{staticClass:"btn btn-outline-secondary",class:{active:"URL"===t.imgLoadMethod},attrs:{type:"button"},on:{click:function(e){t.imgLoadMethod="URL"}}},[t._v("網址")])]),"upload"===t.imgLoadMethod?a("div",{staticClass:"custom-file mt-16"},[a("input",{ref:"files",staticClass:"custom-file-input",attrs:{type:"file",id:"customFile"},on:{change:t.uploadImg}}),a("label",{staticClass:"custom-file-label text-overflow",attrs:{for:"customFile"}},[t._v(t._s(t.tempProduct.image||"未選擇圖片檔案"))])]):t._e(),"URL"===t.imgLoadMethod?a("div",{staticClass:"URL-input-group mt-16"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control w-100",attrs:{type:"text",placeholder:"請輸入圖片網址"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}}),a("button",{staticClass:"check-btn btn btn-secondary flex-shrink-0"},[t._v("確認")])]):t._e()]),a("div",[a("p",{staticClass:"mb-12 w-100 mt-16 mt-md-0"},[t._v("啟用狀態")]),a("div",{staticClass:"switch-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"switch-checkbox",attrs:{type:"checkbox",id:"productSwitch"},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t.tempProduct.is_enabled},on:{change:function(e){var a=t.tempProduct.is_enabled,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=null,i=t._i(a,o);s.checked?i<0&&t.$set(t.tempProduct,"is_enabled",a.concat([o])):i>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempProduct,"is_enabled",r)}}}),a("label",{staticClass:"switch-label",attrs:{for:"productSwitch"}})])])]),a("div",{staticClass:"col-12 col-md-6 pr-0 pl-0 pl-md-12 pt-20 pt-md-0"},[a("ValidationProvider",{staticClass:"form-group",attrs:{tag:"div",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"name"}},[t._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control w-100",class:{"is-invalid":r},attrs:{type:"text",id:"name"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("div",{staticClass:"modal-forms-group"},[a("ValidationProvider",{staticClass:"form-group mr-8",attrs:{tag:"div",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"category"}},[t._v("類別")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",class:{"is-invalid":r},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tempProduct,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}}),t._l(t.category,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group ml-8",attrs:{tag:"div",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"product",id:"unit"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"unit"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"modal-forms-group"},[a("ValidationProvider",{staticClass:"form-group mr-8",attrs:{tag:"div",rules:"numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"originPrice"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"originPrice"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group ml-8",attrs:{tag:"div",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"price"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"form-group"},[a("label",{staticClass:"mt-8",attrs:{for:"description"}},[t._v("描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{id:"description",cols:"30",rows:"10"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"mt-8",attrs:{for:"note"}},[t._v("備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{id:"note",cols:"30",rows:"10"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})])],1)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn my-0 mr-16",class:[t.isNewModal?"btn-dark":"btn-danger"],attrs:{type:"button"},on:{click:t.openDeleteModal}},[t._v(t._s(t.isNewModal?"取消":"刪除"))]),a("button",{staticClass:"btn btn-tertiary m-0",attrs:{type:"submit"}},[t._v(" "+t._s(t.isNewModal?"建立":"修改")+" ")]),a("Delete",{attrs:{isOpenDeleteModal:t.isOpenDeleteModal},on:{"update:isOpenDeleteModal":function(e){t.isOpenDeleteModal=e},"update:is-open-delete-modal":function(e){t.isOpenDeleteModal=e},"delete-data":function(e){return t.updateProducts("刪除")}}},[t._v("商品")])],1)])],1)])])],1)},_a=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"nowrap text-right info-edit"},[a("p",[t._v("詳情編輯")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Ca=(a("d81d"),a("b0c0"),a("07ac"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"delete-fade"}},[t.isOpenDeleteModal?a("div",{staticClass:"delete-alert m-0"},[a("p",{staticClass:"text-left"},[t._v("確定要刪除此"),t._t("default"),t._v("嗎?"),a("br"),t._v("(刪除後無法復原)")],2),a("div",[a("button",{staticClass:"btn btn-white text-danger mr-8 mr-sm-16",attrs:{type:"button"},on:{click:function(e){return t.$emit("update:isOpenDeleteModal",!1)}}},[t._v("取消")]),a("button",{staticClass:"btn btn-outline-white",attrs:{type:"button"},on:{click:function(e){return t.$emit("delete-data")}}},[t._v("確定刪除")])])]):t._e()])}),ya=[],wa={name:"Delete",props:["isOpenDeleteModal"]},xa=wa,Pa=(a("9471"),Object(b["a"])(xa,Ca,ya,!1,null,null,null)),$a=Pa.exports,ka={name:"Products",components:{Delete:$a,Pagination:ue},props:["isNewModal","search"],data:function(){return{allProducts:[],tempProduct:{category:"",is_enabled:!1},paginatedProducts:[],pagination:{},searchProducts:[],imgLoadMethod:"upload",sortAttr:"",isLoading:!1,isOpenDeleteModal:!1,isReverse:!1,category:["特色推薦","經典設計","木椅","塑膠椅","金屬椅","沙發"]}},methods:{getProducts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/products/all"),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.get(e).then((function(e){e.data.success?t.allProducts=Object.values(e.data.products).map((function(t){return t})):t.$bus.$emit("message:push","錯誤",e.data.message,"danger"),a.hide(),t.sortAttr="",t.productsFilter()}))},openEditModal:function(t){var e=this;e.$emit("update:isNewModal",!1),e.tempProduct=Object(s["a"])({},t),H()("#dashboardProductsModal").modal("show")},updateProducts:function(t){var e,a,s=this;if(s.tempProduct.origin_price||(s.tempProduct.origin_price=s.tempProduct.price),"建立"===t)e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/product"),a="post";else if("修改"===t)e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/product/").concat(s.tempProduct.id),a="put";else if("刪除"===t)return e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/product/").concat(s.tempProduct.id),a="delete",s.isOpenDeleteModal=!1,void s.updateProductsMethods(a,e,t);s.$refs.form.validate().then((function(r){r&&(s.$refs.form.reset(),s.updateProductsMethods(a,e,t))}))},updateProductsMethods:function(t,e,a){var s=this,r=s.$loading.show({},{default:this.$createElement("LogoLoadingAnimation")});s.$http[t](e,{data:s.tempProduct}).then((function(t){r.hide(),t.data.success?s.$bus.$emit("message:push","成功","資料".concat(a,"成功"),"success"):s.$bus.$emit("message:push","失敗",t.data.message,"danger"),H()("#dashboardProductsModal").modal("hide"),s.getProducts()}))},uploadImg:function(){var t=this,e=t.$refs.files.files[0],a=new FormData,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/upload");a.append("file-to-upload",e),t.tempProduct.image=e.name,t.isLoading=!0,t.$http.post(s,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data.success?(t.$set(t.tempProduct,"imageUrl",e.data.imageUrl),t.$bus.$emit("message:push","成功","圖片上傳成功","success")):"string"!==typeof e.data.message?(t.tempProduct.image="",t.$bus.$emit("message:push","失敗","檔案過大，需小於1MB","danger")):(t.tempProduct.image="",t.$bus.$emit("message:push","失敗",e.data.message,"danger")),t.isLoading=!1}))},openDeleteModal:function(){var t=this;t.isNewModal?H()("#dashboardProductsModal").modal("hide"):t.isOpenDeleteModal=!0},productsFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"table-header",a=this,s=a.search?a.searchProducts:a.allProducts;a.sortProducts(t,e,s),a.getPagination(s),a.paginateProducts(s)},sortProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"table-header",a=arguments.length>2?arguments[2]:void 0,s=this;s.sortAttr===t&&"table-header"===e?s.isReverse=!s.isReverse:s.isReverse=!1,a.sort((function(e,a){return"origin_price"===t||"price"===t?s.isReverse?e[t]-a[t]:a[t]-e[t]:"is_enabled"===t?s.isReverse?+e[t]-+a[t]:+a[t]-+e[t]:s.isReverse?a[t].localeCompare(e[t],"zh-hant"):e[t].localeCompare(a[t],"zh-hant")})),s.sortAttr=t},getPagination:function(t){var e=this,a=t,s=a.length;e.$set(e.pagination,"current_page",1),s%10!==0?e.$set(e.pagination,"total_pages",Math.floor(s/10)+1):e.$set(e.pagination,"total_pages",Math.floor(s/10)),e.$set(e.pagination,"has_pre",!1),e.pagination.total_pages>1?e.$set(e.pagination,"has_next",!0):e.$set(e.pagination,"has_next",!1)},updatePagination:function(t){var e=this;e.pagination.current_page=t,1===t?e.$set(e.pagination,"has_pre",!1):e.$set(e.pagination,"has_pre",!0),t<e.pagination.total_pages?e.$set(e.pagination,"has_next",!0):e.$set(e.pagination,"has_next",!1)},paginateProducts:function(t){var e=this,a=t,s=10*(e.pagination.current_page-1),r=a.filter((function(t,e){return s<=e&&s+9>=e&&t}));e.paginatedProducts=r},changePage:function(t){var e=this,a=e.search?e.searchProducts:e.allProducts;e.updatePagination(t),e.paginateProducts(a)}},watch:{search:function(){var t=this;if(t.search){var e=t.allProducts.filter((function(e){var a=e.category+e.title+e.origin_price+e.price;return a.indexOf(t.search)>-1&&e}));e.length?t.searchProducts=e:t.searchProducts=[]}t.productsFilter("title","search")}},created:function(){this.getProducts()},mounted:function(){var t=this;H()("#dashboardProductsModal").on("hide.bs.modal",(function(){t.tempProduct={},t.isOpenDeleteModal=!1,t.$refs.form.reset(),"upload"===t.imgLoadMethod&&(t.$refs.files.value="")}))},destroyed:function(){H()("#dashboardProductsModal").off("hide.bs.modal")}},Oa=ka,Ma=(a("3369"),Object(b["a"])(Oa,ba,_a,!1,null,null,null)),Aa=Ma.exports,Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-orders"},[a("table",{staticClass:"table mt-24"},[a("thead",[a("tr",[a("th",[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.ordersFilter("create_at")}}},[t._v(" 時間 "),a("span",{staticClass:"material-icons",class:{active:"create_at"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"responsive"},[t._v("編號")]),a("th",{staticClass:"pl-16"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.ordersFilter("total")}}},[t._v(" 金額 "),a("span",{staticClass:"material-icons",class:{active:"total"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"nowrap"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.ordersFilter("is_paid")}}},[t._v(" 付款狀態 "),a("span",{staticClass:"material-icons",class:{active:"is_paid"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"info-edit text-center"},[t._v("詳情編輯")])])]),a("tbody",t._l(t.paginatedOrders,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(t.getTime(e.create_at)))]),a("td",{staticClass:"responsive"},[t._v(t._s(e.id))]),a("td",{staticClass:"pl-16"},[t._v(t._s(t._f("currency")(e.total)))]),a("td",{staticClass:"font-weight-bold nowrap",class:[e.is_paid?"text-primary":"text-dark"]},[t._v(" "+t._s(e.is_paid?"已付款":"未付款")+" ")]),a("td",{staticClass:"info-edit text-center"},[a("button",{staticClass:"btn-square btn-outline-secondary",on:{click:function(a){return t.openEditModal(e)}}},[a("span",{staticClass:"material-icons"},[t._v("edit")])])])])})),0)]),a("Pagination",{attrs:{pagination:t.pagination},on:{"change-page":t.changePage}}),a("div",{staticClass:"dashboard-orders-modal modal fade",attrs:{id:"dashboardOrdersModal",tabindex:"-1",role:"dialog","aria-labelledby":"dashboardOrdersModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("ValidationObserver",{ref:"form",staticClass:"order-form",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.editOrder(e)}}},[a("div",{staticClass:"modal-body text-left"},[a("p",{staticClass:"mb-8"},[t._v(" 訂單時間："+t._s(" ")+t._s(" ")+" "),a("span",[t._v(t._s(t.getTime(t.tempOrder.create_at)))])]),a("p",{staticClass:"pb-8"},[t._v(" 訂單編號："+t._s(" ")+t._s(" ")+" "),a("span",[t._v(t._s(t.tempOrder.id))])]),a("p",{staticClass:"order-products mb-12"},[t._v("訂購商品：")]),a("table",{staticClass:"table table-borderless m-0"},[a("tbody",t._l(t.tempOrder.products,(function(e){return a("tr",{key:e.id,staticClass:"tbody-tr"},[a("td",{staticClass:"text-overflow pl-12 pl-md-16"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"text-nowrap text-center"},[t._v(" "+t._s(e.qty+" / "+e.product.unit)+" ")]),a("td",{staticClass:"text-right pr-12 pr-md-16"},[t._v(t._s(t._f("currency")(e.product.price)))])])})),0)]),a("p",{staticClass:"order-total pt-16 pb-20 text-right"},[t._v(" 總計(已扣優惠券)"+t._s(" ")+t._s(" ")+" "),a("span",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t._f("currency")(t.tempOrder.total)))])]),a("p",{staticClass:"mr-16 my-12"},[t._v("訂購人資訊：")]),a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{staticClass:"w-100 text-left",attrs:{for:"user-name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.name,expression:"tempOrder.user.name"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"user-name",placeholder:"請輸入姓名",autocomplete:"name"},domProps:{value:t.tempOrder.user.name},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"name",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("p",{staticClass:"mb-8"},[t._v("地址")]),a("div",{staticClass:"d-flex mb-12 mb-md-16"},[a("ValidationProvider",{staticClass:"form-group w-50 county mb-0",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectCountyIndex,expression:"selectCountyIndex"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectCountyIndex=e.target.multiple?a:a[0]},function(e){return t.getRegion(t.selectCountyIndex)}]}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("請選擇縣市")]),t._l(t.areaList,(function(e,s){return a("option",{key:e.county,domProps:{value:s}},[t._v(" "+t._s(e.county)+" ")])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group w-50 region mb-0",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectRegion,expression:"selectRegion"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectRegion=e.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("請選擇鄉鎮區")]),t._l(t.regionList,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.otherAddress,expression:"otherAddress"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",placeholder:"請輸入地址",autocomplete:"on"},domProps:{value:t.otherAddress},on:{input:function(e){e.target.composing||(t.otherAddress=e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("div",{staticClass:"d-flex"},[a("ValidationProvider",{staticClass:"form-group w-50 mobile-phone",attrs:{rules:"required|numeric|max:10",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"mobile-phone"}},[t._v("手機")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.tel,expression:"tempOrder.user.tel"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"mobile-phone",placeholder:"請輸入手機號碼",autocomplete:"on"},domProps:{value:t.tempOrder.user.tel},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"tel",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group w-50 email",attrs:{rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"email"}},[t._v("電子信箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.email,expression:"tempOrder.user.email"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"email",id:"email",placeholder:"請輸入電子信箱",autocomplete:"email"},domProps:{value:t.tempOrder.user.email},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"form-group"},[a("label",{staticClass:"textarea-form-label",attrs:{for:"notes"}},[t._v("備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.message,expression:"tempOrder.message"}],staticClass:"form-control",attrs:{id:"notes",rows:"3"},domProps:{value:t.tempOrder.message},on:{input:function(e){e.target.composing||t.$set(t.tempOrder,"message",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"paymentMethodSelect"}},[t._v("付款狀態")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.isPaid,expression:"isPaid"}],staticClass:"form-control",attrs:{id:"paymentStatusSelect"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.isPaid=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("未付款")]),a("option",{attrs:{value:"1"}},[t._v("已付款")])])])],1),a("div",{staticClass:"modal-footer p-16"},[a("button",{staticClass:"btn btn-tertiary m-0",attrs:{type:"submit"}},[t._v("編輯")])])])],1)])])],1)},Ta=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"dashboardOrdersModalLabel"}},[t._v("訂單詳情")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Ea=a("3835"),Na={name:"Orders",components:{Pagination:ue},props:["search"],data:function(){return{allOrders:[],searchOrders:[],paginatedOrders:[],pagination:{},tempOrder:{user:{}},areaList:ea,regionList:[],selectCountyIndex:"",selectRegion:"",isPaid:0,tempAddress:"",otherAddress:"",sortAttr:"",isReverse:!1}},methods:{getOrders:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/orders?page=1"),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.get(e).then((function(s){t.allOrders=s.data.orders,t.pagination=s.data.pagination;var r=[];if(t.pagination.total_pages>1){var o=1;while(o<t.pagination.total_pages){var i=o+1;e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/orders?page=").concat(i),r.push(t.$http.get(e)),o+=1}t.$http.all(r).then(t.$http.spread((function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];var o=s.map((function(t){return t.data.orders})),i=[];o.forEach((function(t){i=i.concat(t)})),i.forEach((function(e){t.allOrders.push(e)})),t.ordersFilter(),a.hide()})))}else t.couponsFilter(),a.hide()}))},getTime:function(t){var e=this;if(!t)return!1;var a=t.toString();if(a.length<13){var s=0,r=13-a.length;while(s<r)a+="0",s+=1}a=parseInt(a,10);var o=new Date(a),i=e.timeStr(o.getMonth()+1),n=e.timeStr(o.getDate()),c=e.timeStr(o.getHours()),l=e.timeStr(o.getMinutes()),d=e.timeStr(o.getSeconds()),u="\n      ".concat(o.getFullYear(),"-").concat(i,"-").concat(n,"\n      ").concat(c,":").concat(l,":").concat(d,"\n      ");return u},timeStr:function(t){var e="";return e=t<10?"0".concat(t):"".concat(t),e},ordersFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"create_at",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"table-header",a=this,s=a.search?a.searchOrders:a.allOrders;a.sortOrders(t,e,s),a.getPagination(s),a.paginateOrders(s)},sortOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"create_at",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"table-header",a=arguments.length>2?arguments[2]:void 0,s=this;s.sortAttr===t&&"table-header"===e?s.isReverse=!s.isReverse:s.isReverse=!1,a.sort((function(e,a){return"total"===t||"create_at"===t?s.isReverse?e[t]-a[t]:a[t]-e[t]:s.isReverse?+e[t]-+a[t]:+a[t]-+e[t]})),s.sortAttr=t},getPagination:function(t){var e=this,a=t,s=a.length;e.$set(e.pagination,"current_page",1),s%10!==0?e.$set(e.pagination,"total_pages",Math.floor(s/10)+1):e.$set(e.pagination,"total_pages",Math.floor(s/10)),e.$set(e.pagination,"has_pre",!1),e.pagination.total_pages>1?e.$set(e.pagination,"has_next",!0):e.$set(e.pagination,"has_next",!1)},updatePagination:function(t){var e=this;e.pagination.current_page=t,1===t?e.$set(e.pagination,"has_pre",!1):e.$set(e.pagination,"has_pre",!0),t<e.pagination.total_pages?e.$set(e.pagination,"has_next",!0):e.$set(e.pagination,"has_next",!1)},paginateOrders:function(t){var e=this,a=t,s=10*(e.pagination.current_page-1),r=a.filter((function(t,e){return s<=e&&s+9>=e&&t}));e.paginatedOrders=r},changePage:function(t){var e=this,a=e.search?e.searchOrders:e.allOrders;e.updatePagination(t),e.paginateOrders(a)},openEditModal:function(t){var e=this;e.tempOrder=JSON.stringify(t),e.tempOrder=JSON.parse(e.tempOrder),e.isPaid=e.tempOrder.is_paid?1:0;var a=e.tempOrder.user.address.slice(4,7),s=e.tempOrder.user.address.slice(0,3);e.areaList.forEach((function(t,s){t.county===a&&(e.selectCountyIndex=s)})),e.getRegion(e.selectCountyIndex),e.regionList.forEach((function(t){var a=t.split(" ");a[1]===s&&(e.selectRegion=t)}));var r=e.selectRegion.split(" "),o=e.tempOrder.user.address.split(r[0]),i=Object(Ea["a"])(o,2);e.otherAddress=i[1],H()("#dashboardOrdersModal").modal("show")},getRegion:function(t){""!==t&&(this.regionList=this.areaList[t].region)},editOrder:function(){var t=this;t.$refs.form.validate().then((function(e){if(e){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/order/").concat(t.tempOrder.id),s=t.selectRegion.split(" ");t.tempOrder.user.address="".concat(s[1]," ").concat(t.areaList[t.selectCountyIndex].county).concat(s[0]).concat(t.otherAddress),t.tempOrder.is_paid=!!parseInt(t.isPaid,10);var r=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.put(a,{data:t.tempOrder}).then((function(e){e.data.success?(t.$bus.$emit("message:push","成功","訂單修改成功","success"),H()("#dashboardOrdersModal").modal("hide"),t.getOrders()):t.$bus.$emit("message:push","失敗",e.data.message,"danger"),r.hide()}))}}))}},watch:{search:function(){var t=this;if(t.search){var e=t.allOrders.filter((function(e){var a=t.getTime(e.create_at)+e.id+e.message+e.total;return a.indexOf(t.search)>-1&&e}));e.length?t.searchOrders=e:t.searchOrders=[]}t.ordersFilter("create_at","search")}},created:function(){this.getOrders()}},qa=Na,Ia=(a("313e"),Object(b["a"])(qa,Sa,Ta,!1,null,null,null)),La=Ia.exports,Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-coupon"},[a("table",{staticClass:"table mt-24"},[a("thead",[a("tr",[a("th",[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.couponsFilter("title")}}},[t._v(" 名稱 "),a("span",{staticClass:"material-icons",class:{active:"title"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"responsive"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.couponsFilter("code")}}},[t._v(" 序號 "),a("span",{staticClass:"material-icons",class:{active:"code"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"pl-12"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.couponsFilter("percent")}}},[t._v(" 折扣 "),a("span",{staticClass:"material-icons",class:{active:"percent"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"responsive"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.couponsFilter("due_date")}}},[t._v(" 截止日期 "),a("span",{staticClass:"material-icons",class:{active:"due_date"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),a("th",{staticClass:"nowrap"},[a("button",{staticClass:"btn font-weight-bold p-0",on:{click:function(e){return t.couponsFilter("is_enabled")}}},[t._v(" 啟用狀態 "),a("span",{staticClass:"material-icons",class:{active:"is_enabled"===t.sortAttr,reverse:t.isReverse}},[t._v("keyboard_arrow_down")])])]),t._m(0)])]),a("tbody",t._l(t.paginatedCoupons,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"responsive"},[t._v(t._s(e.code))]),a("td",{staticClass:"font-weight-bold text-danger pl-12"},[t._v(t._s(t.getDiscount(e.percent))+"折")]),a("td",{staticClass:"responsive"},[t._v(t._s(t.getTime(e.due_date)))]),a("td",{staticClass:"font-weight-bold nowrap",class:[e.is_enabled?"text-primary":"text-light"]},[t._v(" "+t._s(e.is_enabled?"已啟用":"未啟用")+" ")]),a("td",{staticClass:"text-center nowrap info-edit"},[a("button",{staticClass:"btn-square btn-outline-secondary",on:{click:function(a){return t.openEditModal(e)}}},[a("span",{staticClass:"material-icons"},[t._v("edit")])])])])})),0)]),a("Pagination",{attrs:{pagination:t.pagination},on:{"change-page":t.changePage}}),a("div",{staticClass:"dashboard-coupons-modal modal fade",attrs:{id:"dashboardCouponsModal",tabindex:"-1",role:"dialog","aria-labelledby":"dashboardCouponsModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v(" "+t._s(t.isNewModal?"優惠券建立":"優惠券編輯")+" ")]),t._m(1)]),a("ValidationObserver",{ref:"form",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.upadateCoupons(t.isNewModal?"建立":"修改")}}},[a("div",{staticClass:"modal-body pt-0 text-left"},[a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"name"}},[t._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"name",autocomplete:"name"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("div",{staticClass:"d-block d-sm-flex"},[a("ValidationProvider",{staticClass:"form-group pr-8",attrs:{rules:"required|alpha_dash|max:16",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"code"}},[t._v("序號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"code",autocomplete:"on"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group ml-sm-8",attrs:{rules:"required|numeric|max:2",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("label",{attrs:{for:"discount"}},[t._v("優惠折數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{type:"text",id:"discount",autocomplete:"on"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("p",{staticClass:"mb-8"},[t._v("截止時間")]),a("div",{staticClass:"d-flex mb-8"},[a("ValidationProvider",{staticClass:"form-group mr-8",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectTime.year,expression:"selectTime.year"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{id:"year",required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectTime,"year",e.target.multiple?a:a[0])},function(e){return t.updateOption("year")}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("年")]),t._l(100,(function(e){return a("option",{key:e,domProps:{value:t.now.year-1+e}},[t._v(" "+t._s(t.now.year-1+e)+" ")])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group mx-8",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectTime.month,expression:"selectTime.month"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{id:"month",required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectTime,"month",e.target.multiple?a:a[0])},function(e){return t.updateOption("month")}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("月")]),t._l(t.isThisYear?12-t.now.month+1:12,(function(e){return a("option",{key:e,domProps:{value:t.isThisYear?t.now.month-1+e:e}},[t._v(" "+t._s(t.timeStr(t.isThisYear?t.now.month-1+e:e))+" ")])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group ml-8",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectTime.day,expression:"selectTime.day"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{id:"day",required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectTime,"day",e.target.multiple?a:a[0])},function(e){return t.updateOption("day")}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("日")]),t._l(t.isThisYear?t.daysInMonth-t.now.day+1:t.daysInMonth,(function(e){return a("option",{key:e,domProps:{value:t.isThisYear?t.now.day+e-1:e}},[t._v(" "+t._s(t.timeStr(t.isThisYear?t.now.day+e-1:e))+" ")])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"d-flex mb-16"},[a("ValidationProvider",{staticClass:"form-group mr-8",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectTime.hour,expression:"selectTime.hour"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{id:"hour",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectTime,"hour",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("時")]),t._l(t.isThisYear?24-t.now.hour:24,(function(e){return a("option",{key:e,domProps:{value:t.isThisYear?t.now.hour+e-1:e}},[t._v(t._s(t.timeStr(t.isThisYear?t.now.hour+e-1:e)))])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])}),a("ValidationProvider",{staticClass:"form-group ml-8",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.failed;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectTime.minute,expression:"selectTime.minute"}],staticClass:"form-control",class:{"is-invalid":r},attrs:{id:"minute",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectTime,"minute",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("分")]),t._l(t.isThisYear?60-t.now.minute-1:60,(function(e){return a("option",{key:e,domProps:{value:t.isThisYear?t.now.minute+e-1:e}},[t._v(t._s(t.timeStr(t.isThisYear?t.now.minute+e-1:e)))])}))],2),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}])})],1),a("p",[t._v("啟用狀態")]),a("div",{staticClass:"switch-group mt-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"switch-checkbox",attrs:{type:"checkbox",id:"couponSwitch"},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t.tempCoupon.is_enabled},on:{change:function(e){var a=t.tempCoupon.is_enabled,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=null,i=t._i(a,o);s.checked?i<0&&t.$set(t.tempCoupon,"is_enabled",a.concat([o])):i>-1&&t.$set(t.tempCoupon,"is_enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempCoupon,"is_enabled",r)}}}),a("label",{staticClass:"switch-label",attrs:{for:"couponSwitch"}})])],1),a("div",{staticClass:"modal-footer p-16"},[a("button",{staticClass:"btn my-0 mr-16",class:[t.isNewModal?"btn-dark":"btn-danger"],attrs:{type:"button"},on:{click:t.openDeleteModal}},[t._v(t._s(t.isNewModal?"取消":"刪除"))]),a("button",{staticClass:"btn btn-tertiary m-0 ml-sm-8",attrs:{type:"submit"}},[t._v(t._s(t.isNewModal?"建立":"修改"))]),a("Delete",{attrs:{isOpenDeleteModal:t.isOpenDeleteModal},on:{"update:isOpenDeleteModal":function(e){t.isOpenDeleteModal=e},"update:is-open-delete-modal":function(e){t.isOpenDeleteModal=e},deleteData:function(e){return t.upadateCoupons("刪除")}}},[t._v("優惠券")])],1)])],1)])])],1)},ja=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center nowrap info-edit"},[a("p",[t._v("詳情編輯")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Fa={name:"Coupons",components:{Delete:$a,Pagination:ue},props:["isNewModal","search"],data:function(){return{allCoupons:[],tempCoupon:{},searchCoupons:[],paginatedCoupons:[],pagination:{},now:{},selectTime:{year:"",month:"",day:"",hour:"",minute:""},daysInMonth:31,sortAttr:"",isThisYear:!1,isOpenDeleteModal:!1,isReverse:!1}},methods:{getCoupons:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/coupons?page=1"),a=t.$loading.show({},{default:t.$createElement("LogoLoadingAnimation")});t.$http.get(e).then((function(s){t.allCoupons=s.data.coupons,t.pagination=s.data.pagination;var r=[];if(t.pagination.total_pages>1){var o=1;while(o<t.pagination.total_pages){var i=o+1;e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/coupons?page=").concat(i),r.push(t.$http.get(e)),o+=1}t.$http.all(r).then(t.$http.spread((function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];var o=s.map((function(t){return t.data.coupons})),i=[];o.forEach((function(t){i=i.concat(t)})),i.forEach((function(e){t.allCoupons.push(e)})),t.couponsFilter(),a.hide()})))}else t.couponsFilter(),a.hide()}))},couponsFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"table-header",a=this,s=a.search?a.searchCoupons:a.allCoupons;a.sortProducts(t,e,s),a.getPagination(s),a.paginateCoupons(s)},upadateCoupons:function(t){var e,a,s=this,r=new Date(s.selectTime.year,s.selectTime.month-1,s.selectTime.day,parseInt(s.selectTime.hour,10),parseInt(s.selectTime.minute,10));if(s.tempCoupon.is_enabled||(s.tempCoupon.is_enabled=!1),s.tempCoupon.due_date=r.getTime(),s.tempCoupon.percent=s.getPercent(s.tempCoupon.percent),"建立"===t)e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/coupon"),a="post";else if("修改"===t)e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/coupon/").concat(s.tempCoupon.id),a="put";else if("刪除"===t)return e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chimoochi","/admin/coupon/").concat(s.tempCoupon.id),a="delete",s.openDeleteModal=!1,void s.updateCouponsMethods(a,e,t);s.$refs.form.validate().then((function(r){r&&(s.$refs.form.reset(),s.updateCouponsMethods(a,e,t))}))},updateCouponsMethods:function(t,e,a){var s=this,r=s.$loading.show({},{default:s.$createElement("LogoLoadingAnimation")});s.$http[t](e,{data:s.tempCoupon}).then((function(t){r.hide(),t.data.success?s.$bus.$emit("message:push","成功","資料".concat(a,"成功"),"success"):s.$bus.$emit("message:push","失敗",t.data.message,"danger"),H()("#dashboardCouponsModal").modal("hide"),s.getCoupons()}))},openEditModal:function(t){var e=this,a=new Date(t.due_date);e.$emit("update:isNewModal",!1),e.tempCoupon=Object(s["a"])({},t),e.now.timestamp>t.due_date?(e.resetTimeSelect(),e.$bus.$emit("message:push","提醒","此優惠券已經過期，請更新日期","warning")):(e.selectTime.year=a.getFullYear(),e.selectTime.month=a.getMonth()+1,e.selectTime.day=a.getDate(),e.selectTime.hour=a.getHours(),e.selectTime.minute=a.getMinutes()),H()("#dashboardCouponsModal").modal("show")},updateOption:function(t){var e=this,a=new Date(e.selectTime.year,e.selectTime.month,0);e.daysInMonth=a.getDate(),e.selectTime.year===e.now.year?e.isThisYear=!0:e.isThisYear=!1,"year"===t&&(e.selectTime.month="",e.selectTime.day=""),"month"===t&&(e.selectTime.day="")},timeStr:function(t){var e="";return e=t<10?"0".concat(t):"".concat(t),e},getCurrentTime:function(){var t=this,e=new Date;t.now.year=e.getFullYear(),t.now.month=e.getMonth()+1,t.now.day=e.getDate(),t.now.hour=e.getHours(),t.now.minute=e.getMinutes(),t.now.timestamp=e.getTime()},getTime:function(t){var e=this,a=new Date(t),s=e.timeStr(a.getMonth()+1),r=e.timeStr(a.getDate()),o="".concat(a.getFullYear(),"-").concat(s,"-").concat(r);return o},openDeleteModal:function(){var t=this;t.isNewModal?H()("#dashboardCouponsModal").modal("hide"):t.isOpenDeleteModal=!0},resetTimeSelect:function(){var t=this;t.selectTime.year="",t.selectTime.month="",t.selectTime.day="",t.selectTime.hour="",t.selectTime.minute=""},sortProducts:function(t,e,a){var s=this;s.sortAttr===t&&"table-header"===e?s.isReverse=!s.isReverse:s.isReverse=!1,a.sort((function(e,a){return"percent"===t||"due_date"===t?s.isReverse?e[t]-a[t]:a[t]-e[t]:"is_enabled"===t?s.isReverse?+e[t]-+a[t]:+a[t]-+e[t]:s.isReverse?a[t].localeCompare(e[t],"zh-hant"):e[t].localeCompare(a[t],"zh-hant")})),s.sortAttr=t},getDiscount:function(t){if(t%10===0)return t/10;var e=t;return e},getPercent:function(t){if(t<10)return 10*t;var e=t;return e},getPagination:function(t){var e=this,a=t,s=a.length;e.$set(e.pagination,"current_page",1),s%10!==0?e.$set(e.pagination,"total_pages",Math.floor(s/10)+1):e.$set(e.pagination,"total_pages",Math.floor(s/10)),e.$set(e.pagination,"has_pre",!1),e.pagination.total_pages>1?e.$set(e.pagination,"has_next",!0):e.$set(e.pagination,"has_next",!1)},updatePagination:function(t){var e=this;e.pagination.current_page=t,1===t?e.$set(e.pagination,"has_pre",!1):e.$set(e.pagination,"has_pre",!0),t<e.pagination.total_pages?e.$set(e.pagination,"has_next",!0):e.$set(e.pagination,"has_next",!1)},paginateCoupons:function(t){var e=this,a=t,s=10*(e.pagination.current_page-1),r=a.filter((function(t,e){return s<=e&&s+9>=e&&t}));e.paginatedCoupons=r},changePage:function(t){var e=this,a=e.search?e.searchCoupons:e.allCoupons;e.updatePagination(t),e.paginateCoupons(a)}},watch:{search:function(){var t=this;if(t.search){var e=t.allCoupons.filter((function(e){var a=e.title+e.code+t.getTime(e.due_date)+e.percent;return a.indexOf(t.search)>-1&&e}));e.length?t.searchCoupons=e:t.searchCoupons=[]}t.couponsFilter("title","search")}},created:function(){var t=this;t.getCoupons(),t.getCurrentTime()},mounted:function(){var t=this;H()("#dashboardCouponsModal").on("hide.bs.modal",(function(){t.tempCoupon={},t.resetTimeSelect(),t.isOpenDeleteModal=!1,t.$refs.form.reset()}))},destroyed:function(){H()("#dashboardCouponsModal").off("hide.bs.modal")}},Da=Fa,za=(a("6280"),Object(b["a"])(Da,Ra,ja,!1,null,null,null)),Va=za.exports;r["a"].use(R["a"]);var Ha=[{path:"*",redirect:"/home"},{path:"/",redirect:"/home",name:"Catalog",component:ft,children:[{path:"home",name:"Home",component:ae},{path:"products",name:"Products",component:ve},{path:"products/:id",name:"ProductsCategory",component:ve},{path:"product-info/:id",name:"ProductInfo",component:qe},{path:"shopping-cart",name:"ShoppingCart",component:De},{path:"checkout",redirect:"/checkout/order-form",name:"Checkout",component:Ue,children:[{path:"order-form",name:"OrderForm",component:oa},{path:"payment",name:"Payment",component:ua},{path:"payment-status",name:"PaymentStatus",component:ga}]},{path:"promotion",name:"Promotion",component:we}]},{path:"/login",name:"Login",component:Ct},{path:"/dashboard",redirect:"/dashboard/products",name:"Dashboard",component:Yt,meta:{requiresAuth:!0},children:[{path:"products",name:"DashboardProducts",component:Aa,meta:{requiresAuth:!0}},{path:"orders",name:"Orders",component:La,meta:{requiresAuth:!0}},{path:"coupons",name:"Coupons",component:Va,meta:{requiresAuth:!0}}]}],Ya=new R["a"]({routes:Ha,scrollBehavior:function(){return{x:0,y:0}}}),Ba=Ya;r["a"].prototype.$bus=new r["a"];a("a9e3"),a("b680");var Ua=function(t){var e=Number(t);return"$".concat(e.toFixed().replace(/./g,(function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?",".concat(t):t;return s})))};r["a"].config.productionTip=!1,r["a"].use(d.a,{opacity:.8,zIndex:1060}),r["a"].use(c.a,i.a),i.a.defaults.withCredentials=!0,y["c"].add(w["a"],w["b"],w["d"],w["c"],x["a"],x["b"]),r["a"].component("LogoLoadingAnimation",C),r["a"].component("ValidationProvider",u["b"]),r["a"].component("ValidationObserver",u["a"]),r["a"].component("font-awesome-icon",P["a"]),r["a"].filter("currency",Ua),Object(u["e"])("zh_TW",m),Object(u["d"])("required",Object(s["a"])(Object(s["a"])({},p["f"]),{},{message:"此欄位為必填"})),Object(u["d"])("email",Object(s["a"])(Object(s["a"])({},p["b"]),{},{message:"此欄位需為電子郵件"})),Object(u["d"])("alpha_dash",Object(s["a"])(Object(s["a"])({},p["a"]),{},{message:"此欄位需為英文字母或數字"})),Object(u["d"])("max",Object(s["a"])(Object(s["a"])({},p["c"]),{},{message:"此欄位不可超過{length}個字元"})),Object(u["d"])("min",Object(s["a"])(Object(s["a"])({},p["d"]),{},{message:"此欄位不可小於{length}個字元"})),Object(u["d"])("numeric",Object(s["a"])(Object(s["a"])({},p["e"]),{},{message:"此欄位需為數字"})),Object(u["d"])("mobile_phone",{validate:function(t){return!!t.match(/^09/g)},message:"手機格式不正確"}),Object(u["c"])({classes:{invalid:"is-invalid"}}),new r["a"]({router:Ba,render:function(t){return t(L)}}).$mount("#app"),Ba.beforeEach((function(t,e,a){if(t.meta.requiresAuth){var s="".concat("https://vue-course-api.hexschool.io","/api/user/check");i.a.post(s).then((function(t){t.data.success?a():a({path:"/login"})}))}else a()}))},"5bc2":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJySURBVHgB1Zm7bhNBFIb/tSKIRGMEEqLbUECXS02BqREXiQfAEg9A3iDOexDBCyDLIOo1Da0dOiiwaUBIieIiUa7SyTmzl2w2shTPnJlNPul47bW1+3k8PmcuERwgoiYfWhxPOGKOZY5mFsKEY5wdhxzfOPpRFE0QEhZtcSQcO2RHl+MVfCM34RiRHiOONrThi8aUtqgvBnIPaMAXekf2P/0syD1W4QJfYI3CswYbapK1k65ZNudy0pT22avChT4dVWRjPgxwlvjrRgrMCheacX6iUflAF1dHVhCXD+UThTClCXwZypwcHuDH5w3sbf+DJVJVi6pYdAk+OUI6HlCjLDt3Yx6LL9/i1p37sGDM3WJBnpgWzr5BDEWqLXtyxK97G+a8BVJpW/Ik7xJvoMi0bvDg8TPM3ZyHJSbNRZQOEXegxDTZh09f496jFTggGWNBWrgFJTzKCmbsrSbsWTbHCC/BkUCyQizCToUioKywJMIxLAksKzQlSxAsqEHW0IALEYIjwlZTbikAi8+51N49X2p/JZ/w/+cAnphYCws1SI9FeAgHAkubFv4DRwJKb4pwHwoEku7ngx8ZC6vMNEy6+8LpbstLurvdyBbmnPpxGY8t3RPXPA+vQ5Fp0r+/f7UdwAsf5cH/FCnrHuZLvHCfIhVQujKpzvHBPm323tPu1l9yoJ17VtclEigO6JUYcusW/9brvZCSvaH6B3RkvSw7FW7pDtVPB7NA9Up3YENN0h24wBdYpeuyZVCSlqWiAfkjIa1NmYp4m/S3vYLt13XJDvnpE8oW92bFaRpJZ1u3ErIgI69jnN+6zUeDMlHow3Hr9hT4CgSX5hGLegAAAABJRU5ErkJggg=="},"5bfc":function(t,e,a){t.exports=a.p+"img/d2u7eB.de394359.png"},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},"5eaf":function(t,e,a){"use strict";var s=a("2aa4"),r=a.n(s);r.a},"5f75":function(t,e,a){t.exports=a.p+"img/carousel-banner-xs-01.44b6b93f.png"},6280:function(t,e,a){"use strict";var s=a("298d"),r=a.n(s);r.a},"66a5":function(t,e,a){},6990:function(t,e,a){t.exports=a.p+"img/newsletter.fc4f9393.png"},"6a7a":function(t,e,a){"use strict";var s=a("18ed"),r=a.n(s);r.a},7235:function(t,e,a){t.exports=a.p+"img/5mCpxc.ddf0fdb6.png"},"76e8":function(t,e,a){"use strict";var s=a("fb0c"),r=a.n(s);r.a},"7f9e":function(t,e,a){"use strict";var s=a("b510"),r=a.n(s);r.a},"871e":function(t,e,a){},9370:function(t,e,a){"use strict";var s=a("0967"),r=a.n(s);r.a},9435:function(t,e,a){"use strict";var s=a("bd80"),r=a.n(s);r.a},9471:function(t,e,a){"use strict";var s=a("fdb1"),r=a.n(s);r.a},"9c0c":function(t,e,a){},"9d05":function(t,e,a){t.exports=a.p+"img/featured-banner-02.adbf09dc.png"},"9de2":function(t,e,a){"use strict";var s=a("b907"),r=a.n(s);r.a},"9fa4":function(t,e,a){t.exports=a.p+"img/carousel-banner-xs-02.e8b536df.png"},a4a0:function(t,e,a){"use strict";var s=a("22c0"),r=a.n(s);r.a},a689:function(t,e,a){},b02d:function(t,e,a){t.exports=a.p+"img/BHft40.5e84d7de.png"},b0bd:function(t,e,a){"use strict";var s=a("66a5"),r=a.n(s);r.a},b510:function(t,e,a){},b7c6:function(t,e,a){t.exports=a.p+"img/coupon.861f55ac.svg"},b82b:function(t,e,a){},b8df:function(t,e,a){t.exports=a.p+"img/oTFmIM.7e7ee481.png"},b907:function(t,e,a){},b985:function(t,e,a){"use strict";var s=a("de7f"),r=a.n(s);r.a},ba81:function(t,e,a){},bbcf:function(t,e,a){t.exports=a.p+"img/carousel-banner-xl-01.17b12c6f.png"},bd80:function(t,e,a){},be3a:function(t,e,a){},c53e:function(t,e,a){"use strict";var s=a("b82b"),r=a.n(s);r.a},c582:function(t,e,a){"use strict";var s=a("537e"),r=a.n(s);r.a},c5c1:function(t,e,a){t.exports=a.p+"img/NAgNF3.66ec0402.png"},c737:function(t,e,a){},d3bf:function(t,e,a){t.exports=a.p+"img/payment-successful.e02bc538.svg"},d842:function(t,e,a){t.exports=a.p+"img/carousel-banner-sm-02.c843e11a.png"},dbf1:function(t){t.exports=JSON.parse('[{"county":"新北市","region":["萬里區 207","金山區 208","板橋區 220","汐止區 221","深坑區 222","石碇區 223","瑞芳區 224","平溪區 226","雙溪區 227","貢寮區 228","新店區 231","坪林區 232","烏來區 233","永和區 234","中和區 235","土城區 236","三峽區 237","樹林區 238","鶯歌區 239","三重區 241","新莊區 242","泰山區 243","林口區 244","蘆洲區 247","五股區 248","八里區 249","淡水區 251","三芝區 252","石門區 253"]},{"county":"臺北市","region":["中正區 100","大同區 103","中山區 104","松山區 105","大安區 106","萬華區 108","信義區 110","士林區 111","北投區 112","內湖區 114","南港區 115","文山區 116"]},{"county":"桃園市","region":["中壢區 320","平鎮區 324","龍潭區 325","楊梅區 326","新屋區 327","觀音區 328","桃園區 330","龜山區 333","八德區 334","大溪區 335","復興區 336","大園區 337","蘆竹區 338"]},{"county":"臺中市","region":["中區 400","東區 401","南區 402","西區 403","北區 404","北屯區 406","西屯區 407","南屯區 408","太平區 411","大里區 412","霧峰區 413","烏日區 414","豐原區 420","后里區 421","石岡區 422","東勢區 423","和平區 424","新社區 426","潭子區 427","大雅區 428","神岡區 429","大肚區 432","沙鹿區 433","龍井區 434","梧棲區 435","清水區 436","大甲區 437","外埔區 438","大安區 439"]},{"county":"臺南市","region":["中西區 700","東區 701","南區 702","北區 704","安平區 708","安南區 709","永康區 710","歸仁區 711","新化區 712","左鎮區 713","玉井區 714","楠西區 715","南化區 716","仁德區 717","關廟區 718","龍崎區 719","官田區 720","麻豆區 721","佳里區 722","西港區 723","七股區 724","將軍區 725","學甲區 726","北門區 727","新營區 730","後壁區 731","白河區 732","東山區 733","六甲區 734","下營區 735","柳營區 736","鹽水區 737","善化區 741","大內區 742","山上區 743","新市區 744","安定區 745"]},{"county":"高雄市","region":["新興區 800","前金區 801","苓雅區 802","鹽埕區 803","鼓山區 804","旗津區 805","前鎮區 806","三民區 807","楠梓區 811","小港區 812","左營區 813","仁武區 814","大社區 815","東沙群島 817","南沙群島 819","岡山區 820","路竹區 821","阿蓮區 822","田寮區 823","燕巢區 824","橋頭區 825","梓官區 826","彌陀區 827","永安區 828","湖內區 829","鳳山區 830","大寮區 831","林園區 832","鳥松區 833","大樹區 840","旗山區 842","美濃區 843","六龜區 844","內門區 845","杉林區 846","甲仙區 847","桃源區 848","那瑪夏區 849","茂林區 851","茄萣區 852"]},{"county":"基隆市","region":["仁愛區 200","信義區 201","中正區 202","中山區 203","安樂區 204","暖暖區 205","七堵區 206"]},{"county":"新竹市","region":["東區 300","北區 300","香山區 300"]},{"county":"嘉義市","region":["東區 600","西區 600"]},{"county":"新竹縣","region":["竹北市 302","湖口鄉 303","新豐鄉 304","新埔鎮 305","關西鎮 306","芎林鄉 307","寶山鄉 308","竹東鎮 310","五峰鄉 311","橫山鄉 312","尖石鄉 313","北埔鄉 314","峨眉鄉 315"]},{"county":"苗栗縣","region":["竹南鎮 350","頭份市 351","三灣鄉 352","南庄鄉 353","獅潭鄉 354","後龍鎮 356","通霄鎮 357","苑裡鎮 358","苗栗市 360","造橋鄉 361","頭屋鄉 362","公館鄉 363","大湖鄉 364","泰安鄉 365","銅鑼鄉 366","三義鄉 367","西湖鄉 368","卓蘭鎮 369"]},{"county":"彰化縣","region":["彰化市 500","芬園鄉 502","花壇鄉 503","秀水鄉 504","鹿港鎮 505","福興鄉 506","線西鄉 507","和美鎮 508","伸港鄉 509","員林市 510","社頭鄉 511","永靖鄉 512","埔心鄉 513","溪湖鎮 514","大村鄉 515","埔鹽鄉 516","田中鎮 520","北斗鎮 521","田尾鄉 522","埤頭鄉 523","溪州鄉 524","竹塘鄉 525","二林鎮 526","大城鄉 527","芳苑鄉 528","二水鄉 530"]},{"county":"南投縣","region":["南投市 540","中寮鄉 541","草屯鎮 542","國姓鄉 544","埔里鎮 545","仁愛鄉 546","名間鄉 551","集集鎮 552","水里鄉 553","魚池鄉 555","信義鄉 556","竹山鎮 557","鹿谷鄉 558"]},{"county":"雲林縣","region":["斗南鎮 630","大埤鄉 631","虎尾鎮 632","土庫鎮 633","褒忠鄉 634","東勢鄉 635","臺西鄉 636","崙背鄉 637","麥寮鄉 638","斗六市 640","林內鄉 643","古坑鄉 646","莿桐鄉 647","西螺鎮 648","二崙鄉 649","北港鎮 651","水林鄉 652","口湖鄉 653","四湖鄉 654","元長鄉 655"]},{"county":"嘉義縣","region":["番路鄉 602","梅山鄉 603","竹崎鄉 604","阿里山鄉 605","中埔鄉 606","大埔鄉 607","水上鄉 608","鹿草鄉 611","太保市 612","朴子市 613","東石鄉 614","六腳鄉 615","新港鄉 616","民雄鄉 621","大林鎮 622","溪口鄉 623","義竹鄉 624","布袋鎮 625"]},{"county":"屏東縣","region":["屏東市 900","三地門鄉 901","霧台鄉 902","瑪家鄉 903","九如鄉 904","里港鄉 905","高樹鄉 906","鹽埔鄉 907","長治鄉 908","麟洛鄉 909","竹田鄉 911","內埔鄉 912","萬丹鄉 913","潮州鎮 920","泰武鄉 921","來義鄉 922","萬巒鄉 923","崁頂鄉 924","新埤鄉 925","南州鄉 926","林邊鄉 927","東港鎮 928","琉球鄉 929","佳冬鄉 931","新園鄉 932","枋寮鄉 940","枋山鄉 941","春日鄉 942","獅子鄉 943","車城鄉 944","牡丹鄉 945","恆春鎮 946","滿州鄉 947"]},{"county":"宜蘭縣","region":["宜蘭市 260","頭城鎮 261","礁溪鄉 262","壯圍鄉 263","員山鄉 264","羅東鎮 265","三星鄉 266","大同鄉 267","五結鄉 268","冬山鄉 269","蘇澳鎮 270","南澳鄉 272"]},{"county":"花蓮縣","region":["花蓮市 970","新城鄉 971","秀林鄉 972","吉安鄉 973","壽豐鄉 974","鳳林鎮 975","光復鄉 976","豐濱鄉 977","瑞穗鄉 978","萬榮鄉 979","玉里鎮 981","卓溪鄉 982","富里鄉 983"]},{"county":"臺東縣","region":["臺東市 950","綠島鄉 951","蘭嶼鄉 952","延平鄉 953","卑南鄉 954","鹿野鄉 955","關山鎮 956","海端鄉 957","池上鄉 958","東河鄉 959","成功鎮 961","長濱鄉 962","太麻里鄉 963","金峰鄉 964","大武鄉 965","達仁鄉 966"]},{"county":"澎湖縣","region":["馬公市 880","西嶼鄉 881","望安鄉 882","七美鄉 883","白沙鄉 884","湖西鄉 885"]},{"county":"金門縣","region":["金沙鎮 890","金湖鎮 891","金寧鄉 892","金城鎮 893","烈嶼鄉 894","烏坵鄉 896"]},{"county":"連江縣","region":["南竿鄉 209","北竿鄉 210","莒光鄉 211","東引鄉 212"]}]')},dd7c:function(t,e,a){},de7f:function(t,e,a){},e078:function(t,e,a){var s={"./2A1Uz0.png":"eab2","./5mCpxc.png":"7235","./BHft40.png":"b02d","./KDgw03.png":"52b1","./NAgNF3.png":"c5c1","./OUOLxK.png":"1da5","./carousel-banner-sm-01.png":"47cb","./carousel-banner-sm-02.png":"d842","./carousel-banner-xl-01.png":"bbcf","./carousel-banner-xl-02.png":"2df8","./carousel-banner-xs-01.png":"5f75","./carousel-banner-xs-02.png":"9fa4","./d2u7eB.png":"5bfc","./featured-banner-01.png":"1d9b","./featured-banner-02.png":"9d05","./nRxxZe.png":"3db9","./newsletter.png":"6990","./next.png":"0f66","./oTFmIM.png":"b8df","./previous.png":"5bc2"};function r(t){var e=o(t);return a(e)}function o(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=o,t.exports=r,r.id="e078"},e347:function(t,e,a){t.exports=a.p+"img/logo.6a3f6282.svg"},e589:function(t,e,a){"use strict";var s=a("4365"),r=a.n(s);r.a},e92b:function(t,e,a){t.exports=a.p+"img/white-logo.9621bf5b.svg"},eab2:function(t,e,a){t.exports=a.p+"img/2A1Uz0.3d98dc0e.png"},f2e1:function(t,e,a){},fb0c:function(t,e,a){},fb1d:function(t,e,a){"use strict";var s=a("067a"),r=a.n(s);r.a},fc28:function(t,e,a){"use strict";var s=a("f2e1"),r=a.n(s);r.a},fdb1:function(t,e,a){}});
//# sourceMappingURL=app.f6f1a680.js.map